<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Issue
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Issue";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (I)</a> &raquo;
    
    
    <span class="title">Issue</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Issue
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">ActiveRecord::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next">Issue</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Redmine/I18n.html" title="Redmine::I18n (module)">Redmine::I18n</a></span>, <span class='object_link'><a href="Redmine/NestedSet/IssueNestedSet.html" title="Redmine::NestedSet::IssueNestedSet (module)">Redmine::NestedSet::IssueNestedSet</a></span>, <span class='object_link'><a href="Redmine/SafeAttributes.html" title="Redmine::SafeAttributes (module)">Redmine::SafeAttributes</a></span>, <span class='object_link'><a href="Redmine/Utils/DateCalculation.html" title="Redmine::Utils::DateCalculation (module)">Redmine::Utils::DateCalculation</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/issue.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Redmine - project management software Copyright (C) 2006-2023  Jean-Philippe Lang</p>

<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p>

<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="DONE_RATIO_OPTIONS-constant" class="">DONE_RATIO_OPTIONS =
          
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>issue_field</span><span class='words_sep'> </span><span class='tstring_content'>issue_status</span><span class='tstring_end'>)</span></span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#deleted_attachment_ids-instance_method" title="#deleted_attachment_ids (instance method)">#<strong>deleted_attachment_ids</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#transition_warning-instance_method" title="#transition_warning (instance method)">#<strong>transition_warning</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute transition_warning.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#allowed_target_projects-class_method" title="allowed_target_projects (class method)">.<strong>allowed_target_projects</strong>(user = User.current, current_project = nil, scope = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a scope of projects that user can assign issues to If current_project is given, it will be included in the scope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#allowed_target_trackers-class_method" title="allowed_target_trackers (class method)">.<strong>allowed_target_trackers</strong>(project, user = User.current, current_tracker = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a scope of trackers that user can assign project issues to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_assigned_to-class_method" title="by_assigned_to (class method)">.<strong>by_assigned_to</strong>(project, with_subprojects = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_author-class_method" title="by_author (class method)">.<strong>by_author</strong>(project, with_subprojects = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_category-class_method" title="by_category (class method)">.<strong>by_category</strong>(project, with_subprojects = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_priority-class_method" title="by_priority (class method)">.<strong>by_priority</strong>(project, with_subprojects = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_subproject-class_method" title="by_subproject (class method)">.<strong>by_subproject</strong>(project)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_tracker-class_method" title="by_tracker (class method)">.<strong>by_tracker</strong>(project, with_subprojects = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_version-class_method" title="by_version (class method)">.<strong>by_version</strong>(project, with_subprojects = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count_and_group_by-class_method" title="count_and_group_by (class method)">.<strong>count_and_group_by</strong>(options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Query generator for selecting groups of issue counts for a project based on specific criteria.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cross_project_scope-class_method" title="cross_project_scope (class method)">.<strong>cross_project_scope</strong>(project, scope = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an issue scope based on project and scope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_relations-class_method" title="load_relations (class method)">.<strong>load_relations</strong>(issues)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Preloads relations for a collection of issues.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_visible_last_notes-class_method" title="load_visible_last_notes (class method)">.<strong>load_visible_last_notes</strong>(issues, user = User.current)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Preloads visible last notes for a collection of issues.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_visible_last_updated_by-class_method" title="load_visible_last_updated_by (class method)">.<strong>load_visible_last_updated_by</strong>(issues, user = User.current)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Preloads users who updated last a collection of issues.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_visible_relations-class_method" title="load_visible_relations (class method)">.<strong>load_visible_relations</strong>(issues, user = User.current)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Preloads visible relations for a collection of issues.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_visible_spent_hours-class_method" title="load_visible_spent_hours (class method)">.<strong>load_visible_spent_hours</strong>(issues, user = User.current)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Preloads visible spent time for a collection of issues.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_visible_total_spent_hours-class_method" title="load_visible_total_spent_hours (class method)">.<strong>load_visible_total_spent_hours</strong>(issues, user = User.current)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Preloads visible total spent time for a collection of issues.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#self_and_descendants-class_method" title="self_and_descendants (class method)">.<strong>self_and_descendants</strong>(issues)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a scope of the given issues and their descendants.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_versions-class_method" title="update_versions (class method)">.<strong>update_versions</strong>(conditions = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Update issues so their versions are not pointing to a fixed_version that is not shared with the issue&#39;s project.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_versions_from_hierarchy_change-class_method" title="update_versions_from_hierarchy_change (class method)">.<strong>update_versions_from_hierarchy_change</strong>(project)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Unassigns issues from versions that are no longer shared after <code>project</code> was moved.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_versions_from_sharing_change-class_method" title="update_versions_from_sharing_change (class method)">.<strong>update_versions_from_sharing_change</strong>(version)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Unassigns issues from <code>version</code> if it&#39;s no longer shared with issue&#39;s project.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#use_field_for_done_ratio%3F-class_method" title="use_field_for_done_ratio? (class method)">.<strong>use_field_for_done_ratio?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#use_status_for_done_ratio%3F-class_method" title="use_status_for_done_ratio? (class method)">.<strong>use_status_for_done_ratio?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#visible_condition-class_method" title="visible_condition (class method)">.<strong>visible_condition</strong>(user, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a SQL conditions string used to find all issues visible by the specified user.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#<=>-instance_method" title="#&lt;=&gt; (instance method)">#<strong>&lt;=&gt;</strong>(issue)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#allowed_target_projects-instance_method" title="#allowed_target_projects (instance method)">#<strong>allowed_target_projects</strong>(user = User.current, scope = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a scope of projects that user can assign the issue to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#allowed_target_projects_for_subtask-instance_method" title="#allowed_target_projects_for_subtask (instance method)">#<strong>allowed_target_projects_for_subtask</strong>(user = User.current)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a scope of projects that user can assign the subtask.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#allowed_target_trackers-instance_method" title="#allowed_target_trackers (instance method)">#<strong>allowed_target_trackers</strong>(user = User.current)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a scope of trackers that user can assign the issue to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assign_attributes-instance_method" title="#assign_attributes (instance method)">#<strong>assign_attributes</strong>(new_attributes, *args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Overrides assign_attributes so that project and tracker get assigned first.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assignable_users-instance_method" title="#assignable_users (instance method)">#<strong>assignable_users</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Users the issue can be assigned to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assignable_versions-instance_method" title="#assignable_versions (instance method)">#<strong>assignable_versions</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Versions that the issue can be assigned to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attachments_addable%3F-instance_method" title="#attachments_addable? (instance method)">#<strong>attachments_addable?</strong>(user = User.current)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attachments_deletable%3F-instance_method" title="#attachments_deletable? (instance method)">#<strong>attachments_deletable?</strong>(user = User.current)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Overrides Redmine::Acts::Attachable::InstanceMethods#attachments_deletable?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attachments_editable%3F-instance_method" title="#attachments_editable? (instance method)">#<strong>attachments_editable?</strong>(user = User.current)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Overrides Redmine::Acts::Attachable::InstanceMethods#attachments_editable?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attributes=-instance_method" title="#attributes= (instance method)">#<strong>attributes=</strong>(new_attributes)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attributes_editable%3F-instance_method" title="#attributes_editable? (instance method)">#<strong>attributes_editable?</strong>(user = User.current)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if user or current user is allowed to edit the issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#available_custom_fields-instance_method" title="#available_custom_fields (instance method)">#<strong>available_custom_fields</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Overrides Redmine::Acts::Customizable::InstanceMethods#available_custom_fields.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_reload-instance_method" title="#base_reload (instance method)">#<strong>base_reload</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#behind_schedule%3F-instance_method" title="#behind_schedule? (instance method)">#<strong>behind_schedule?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is the amount of work done less than it should for the due date.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#blocked%3F-instance_method" title="#blocked? (instance method)">#<strong>blocked?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if this issue is blocked by another issue that is still open.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#blocks%3F-instance_method" title="#blocks? (instance method)">#<strong>blocks?</strong>(other)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if this issue blocks the other issue, otherwise returns false.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#category_id=-instance_method" title="#category_id= (instance method)">#<strong>category_id=</strong>(cid)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#children%3F-instance_method" title="#children? (instance method)">#<strong>children?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Does this issue have children?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_journal-instance_method" title="#clear_journal (instance method)">#<strong>clear_journal</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clears the current journal.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#closable%3F-instance_method" title="#closable? (instance method)">#<strong>closable?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if this issue can be closed and if not, returns false and populates the reason.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#closed%3F-instance_method" title="#closed? (instance method)">#<strong>closed?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return true if the issue is closed, otherwise false.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#closing%3F-instance_method" title="#closing? (instance method)">#<strong>closing?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return true if the issue is being closed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy-instance_method" title="#copy (instance method)">#<strong>copy</strong>(attributes = nil, copy_options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an unsaved copy of the issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy%3F-instance_method" title="#copy? (instance method)">#<strong>copy?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the issue is a copy.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy_from-instance_method" title="#copy_from (instance method)">#<strong>copy_from</strong>(arg, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Copies attributes from another issue, arg can be an id or an Issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#css_classes-instance_method" title="#css_classes (instance method)">#<strong>css_classes</strong>(user = User.current)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a string of css classes that apply to the issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_journal-instance_method" title="#current_journal (instance method)">#<strong>current_journal</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the current journal or nil if it&#39;s not initialized.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dates_derived%3F-instance_method" title="#dates_derived? (instance method)">#<strong>dates_derived?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_status-instance_method" title="#default_status (instance method)">#<strong>default_status</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the default status of the issue based on its tracker Returns nil if tracker is nil.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deletable%3F-instance_method" title="#deletable? (instance method)">#<strong>deletable?</strong>(user = User.current)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if user or current user is allowed to delete the issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#description=-instance_method" title="#description= (instance method)">#<strong>description=</strong>(arg)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">#<strong>destroy</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>AR#Persistence#destroy would raise and RecordNotFound exception if the issue was already deleted or updated (non matching lock_version).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disabled_core_fields-instance_method" title="#disabled_core_fields (instance method)">#<strong>disabled_core_fields</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#done_ratio-instance_method" title="#done_ratio (instance method)">#<strong>done_ratio</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#done_ratio_derived%3F-instance_method" title="#done_ratio_derived? (instance method)">#<strong>done_ratio_derived?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#due_before-instance_method" title="#due_before (instance method)">#<strong>due_before</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the due date or the target due date if any Used on gantt chart.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#duplicates-instance_method" title="#duplicates (instance method)">#<strong>duplicates</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of issues that duplicate this one.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#duration-instance_method" title="#duration (instance method)">#<strong>duration</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the time scheduled for this issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#editable%3F-instance_method" title="#editable? (instance method)">#<strong>editable?</strong>(user = User.current)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if user or current user is allowed to edit or add notes to the issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#editable_custom_field_values-instance_method" title="#editable_custom_field_values (instance method)">#<strong>editable_custom_field_values</strong>(user = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the custom_field_values that can be edited by the given user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#editable_custom_fields-instance_method" title="#editable_custom_fields (instance method)">#<strong>editable_custom_fields</strong>(user = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the custom fields that can be edited by the given user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#estimated_hours=-instance_method" title="#estimated_hours= (instance method)">#<strong>estimated_hours=</strong>(h)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_relation-instance_method" title="#find_relation (instance method)">#<strong>find_relation</strong>(relation_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Finds an issue relation given its id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fixed_version_id=-instance_method" title="#fixed_version_id= (instance method)">#<strong>fixed_version_id=</strong>(vid)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#init_journal-instance_method" title="#init_journal (instance method)">#<strong>init_journal</strong>(user, notes = &quot;&quot;)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(attributes = nil, *args)  &#x21d2; Issue </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#journalized_attribute_names-instance_method" title="#journalized_attribute_names (instance method)">#<strong>journalized_attribute_names</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the names of attributes that are journalized when updating the issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#journals_after-instance_method" title="#journals_after (instance method)">#<strong>journals_after</strong>(journal_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a scope for journals that have an id greater than journal_id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_journal_id-instance_method" title="#last_journal_id (instance method)">#<strong>last_journal_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the id of the last journal or nil.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_notes-instance_method" title="#last_notes (instance method)">#<strong>last_notes</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_updated_by-instance_method" title="#last_updated_by (instance method)">#<strong>last_updated_by</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_statuses_allowed_to-instance_method" title="#new_statuses_allowed_to (instance method)">#<strong>new_statuses_allowed_to</strong>(user = User.current, include_default = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of statuses that user is able to apply.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notes_addable%3F-instance_method" title="#notes_addable? (instance method)">#<strong>notes_addable?</strong>(user = User.current)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if user or current user is allowed to add notes to the issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notified_users-instance_method" title="#notified_users (instance method)">#<strong>notified_users</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the users that should be notified.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify=-instance_method" title="#notify= (instance method)">#<strong>notify=</strong>(arg)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notify%3F-instance_method" title="#notify? (instance method)">#<strong>notify?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#overdue%3F-instance_method" title="#overdue? (instance method)">#<strong>overdue?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the issue is overdue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent_issue_id-instance_method" title="#parent_issue_id (instance method)">#<strong>parent_issue_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent_issue_id=-instance_method" title="#parent_issue_id= (instance method)">#<strong>parent_issue_id=</strong>(arg)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#previous_assignee-instance_method" title="#previous_assignee (instance method)">#<strong>previous_assignee</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the previous assignee whenever we&#39;re before the save or in after_* callbacks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#priority_derived%3F-instance_method" title="#priority_derived? (instance method)">#<strong>priority_derived?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#priority_id=-instance_method" title="#priority_id= (instance method)">#<strong>priority_id=</strong>(pid)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#project=-instance_method" title="#project= (instance method)">#<strong>project=</strong>(project, keep_tracker = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the project.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#project_id=-instance_method" title="#project_id= (instance method)">#<strong>project_id=</strong>(project_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_only_attribute_names-instance_method" title="#read_only_attribute_names (instance method)">#<strong>read_only_attribute_names</strong>(user = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the names of attributes that are read-only for user or the current user For users with multiple roles, the read-only fields are the intersection of read-only fields of each role The result is an array of strings where sustom fields are represented with their ids.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#recipients-instance_method" title="#recipients (instance method)">#<strong>recipients</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the email addresses that should be notified.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#relations-instance_method" title="#relations (instance method)">#<strong>relations</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reload-instance_method" title="#reload (instance method)">#<strong>reload</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reopenable%3F-instance_method" title="#reopenable? (instance method)">#<strong>reopenable?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if this issue can be reopen and if not, returns false and populates the reason.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reopening%3F-instance_method" title="#reopening? (instance method)">#<strong>reopening?</strong>  &#x21d2; Boolean </a>
    

    
      (also: #reopened?)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return true if the issue is being reopened.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#required_attribute%3F-instance_method" title="#required_attribute? (instance method)">#<strong>required_attribute?</strong>(name, user = nil)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the attribute is required for user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#required_attribute_names-instance_method" title="#required_attribute_names (instance method)">#<strong>required_attribute_names</strong>(user = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the names of required attributes for user or the current user For users with multiple roles, the required fields are the intersection of required fields of each role The result is an array of strings where sustom fields are represented with their ids.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reschedule_on-instance_method" title="#reschedule_on (instance method)">#<strong>reschedule_on</strong>(date)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets start_date on the given date or the next working day and changes due_date to keep the same working duration.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reschedule_on!-instance_method" title="#reschedule_on! (instance method)">#<strong>reschedule_on!</strong>(date, journal = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Reschedules the issue on the given date or the next working day and saves the record.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#safe_attribute_names-instance_method" title="#safe_attribute_names (instance method)">#<strong>safe_attribute_names</strong>(user = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#safe_attributes=-instance_method" title="#safe_attributes= (instance method)">#<strong>safe_attributes=</strong>(attrs, user = User.current)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Safely sets attributes Should be called from controllers instead of #attributes= attr_accessible is too rough because we still want things like Issue.new(:project =&gt; foo) to work.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_custom_field_default%3F-instance_method" title="#set_custom_field_default? (instance method)">#<strong>set_custom_field_default?</strong>(custom_value)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Overrides Redmine::Acts::Customizable::InstanceMethods#set_custom_field_default?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_parent_id-instance_method" title="#set_parent_id (instance method)">#<strong>set_parent_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#soonest_start-instance_method" title="#soonest_start (instance method)">#<strong>soonest_start</strong>(reload = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#spent_hours-instance_method" title="#spent_hours (instance method)">#<strong>spent_hours</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the number of hours spent on this issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status=-instance_method" title="#status= (instance method)">#<strong>status=</strong>(status)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the status.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status_id=-instance_method" title="#status_id= (instance method)">#<strong>status_id=</strong>(status_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status_was-instance_method" title="#status_was (instance method)">#<strong>status_was</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the initial status of the issue Returns nil for a new issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#total_estimated_hours-instance_method" title="#total_estimated_hours (instance method)">#<strong>total_estimated_hours</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#total_spent_hours-instance_method" title="#total_spent_hours (instance method)">#<strong>total_spent_hours</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the total number of hours spent on this issue and its descendants.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tracker=-instance_method" title="#tracker= (instance method)">#<strong>tracker=</strong>(tracker)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the tracker.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tracker_id=-instance_method" title="#tracker_id= (instance method)">#<strong>tracker_id=</strong>(tracker_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tracker_was-instance_method" title="#tracker_was (instance method)">#<strong>tracker_was</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the original tracker.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_done_ratio_from_issue_status-instance_method" title="#update_done_ratio_from_issue_status (instance method)">#<strong>update_done_ratio_from_issue_status</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the done_ratio using the status if that setting is set.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#valid_parent_project%3F-instance_method" title="#valid_parent_project? (instance method)">#<strong>valid_parent_project?</strong>(issue = parent)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if issue&#39;s project is a valid parent issue project.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_custom_field_values-instance_method" title="#validate_custom_field_values (instance method)">#<strong>validate_custom_field_values</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Overrides Redmine::Acts::Customizable::InstanceMethods#validate_custom_field_values so that custom values that are not editable are not validated (eg. a custom field that is marked as required should not trigger a validation error if the user is not allowed to edit this field).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_issue-instance_method" title="#validate_issue (instance method)">#<strong>validate_issue</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_permissions-instance_method" title="#validate_permissions (instance method)">#<strong>validate_permissions</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_required_fields-instance_method" title="#validate_required_fields (instance method)">#<strong>validate_required_fields</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Validates the issue against additional workflow requirements.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#visible%3F-instance_method" title="#visible? (instance method)">#<strong>visible?</strong>(usr = nil)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if usr or current user is allowed to view the issue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#visible_custom_field_values-instance_method" title="#visible_custom_field_values (instance method)">#<strong>visible_custom_field_values</strong>(user = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#visible_journals_with_index-instance_method" title="#visible_journals_with_index (instance method)">#<strong>visible_journals_with_index</strong>(user = User.current)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the journals that are visible to user with their index Used to display the issue history.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#was_closed%3F-instance_method" title="#was_closed? (instance method)">#<strong>was_closed?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the issue was closed when loaded.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#working_duration-instance_method" title="#working_duration (instance method)">#<strong>working_duration</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the duration in working days.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#would_reschedule%3F-instance_method" title="#would_reschedule? (instance method)">#<strong>would_reschedule?</strong>(other)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the other issue might be rescheduled if the start/due dates of this issue change.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Redmine/NestedSet/IssueNestedSet.html" title="Redmine::NestedSet::IssueNestedSet (module)">Redmine::NestedSet::IssueNestedSet</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Redmine/NestedSet/IssueNestedSet.html#included-class_method" title="Redmine::NestedSet::IssueNestedSet.included (method)">included</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Redmine/I18n.html" title="Redmine::I18n (module)">Redmine::I18n</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Redmine/I18n.html#current_language-instance_method" title="Redmine::I18n#current_language (method)">#current_language</a></span>, <span class='object_link'><a href="Redmine/I18n.html#day_letter-instance_method" title="Redmine::I18n#day_letter (method)">#day_letter</a></span>, <span class='object_link'><a href="Redmine/I18n.html#day_name-instance_method" title="Redmine::I18n#day_name (method)">#day_name</a></span>, <span class='object_link'><a href="Redmine/I18n.html#find_language-instance_method" title="Redmine::I18n#find_language (method)">#find_language</a></span>, <span class='object_link'><a href="Redmine/I18n.html#format_date-instance_method" title="Redmine::I18n#format_date (method)">#format_date</a></span>, <span class='object_link'><a href="Redmine/I18n.html#format_hours-instance_method" title="Redmine::I18n#format_hours (method)">#format_hours</a></span>, <span class='object_link'><a href="Redmine/I18n.html#format_time-instance_method" title="Redmine::I18n#format_time (method)">#format_time</a></span>, <span class='object_link'><a href="Redmine/I18n.html#included-class_method" title="Redmine::I18n.included (method)">included</a></span>, <span class='object_link'><a href="Redmine/I18n.html#l-instance_method" title="Redmine::I18n#l (method)">#l</a></span>, <span class='object_link'><a href="Redmine/I18n.html#l_hours-instance_method" title="Redmine::I18n#l_hours (method)">#l_hours</a></span>, <span class='object_link'><a href="Redmine/I18n.html#l_hours_short-instance_method" title="Redmine::I18n#l_hours_short (method)">#l_hours_short</a></span>, <span class='object_link'><a href="Redmine/I18n.html#l_or_humanize-instance_method" title="Redmine::I18n#l_or_humanize (method)">#l_or_humanize</a></span>, <span class='object_link'><a href="Redmine/I18n.html#languages_options-instance_method" title="Redmine::I18n#languages_options (method)">#languages_options</a></span>, <span class='object_link'><a href="Redmine/I18n.html#ll-instance_method" title="Redmine::I18n#ll (method)">#ll</a></span>, <span class='object_link'><a href="Redmine/I18n.html#lu-instance_method" title="Redmine::I18n#lu (method)">#lu</a></span>, <span class='object_link'><a href="Redmine/I18n.html#month_name-instance_method" title="Redmine::I18n#month_name (method)">#month_name</a></span>, <span class='object_link'><a href="Redmine/I18n.html#set_language_if_valid-instance_method" title="Redmine::I18n#set_language_if_valid (method)">#set_language_if_valid</a></span>, <span class='object_link'><a href="Redmine/I18n.html#valid_languages-instance_method" title="Redmine::I18n#valid_languages (method)">#valid_languages</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Redmine/Utils/DateCalculation.html" title="Redmine::Utils::DateCalculation (module)">Redmine::Utils::DateCalculation</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Redmine/Utils/DateCalculation.html#add_working_days-instance_method" title="Redmine::Utils::DateCalculation#add_working_days (method)">#add_working_days</a></span>, <span class='object_link'><a href="Redmine/Utils/DateCalculation.html#next_working_date-instance_method" title="Redmine::Utils::DateCalculation#next_working_date (method)">#next_working_date</a></span>, <span class='object_link'><a href="Redmine/Utils/DateCalculation.html#non_working_week_days-instance_method" title="Redmine::Utils::DateCalculation#non_working_week_days (method)">#non_working_week_days</a></span>, <span class='object_link'><a href="Redmine/Utils/DateCalculation.html#working_days-instance_method" title="Redmine::Utils::DateCalculation#working_days (method)">#working_days</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Redmine/SafeAttributes.html" title="Redmine::SafeAttributes (module)">Redmine::SafeAttributes</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Redmine/SafeAttributes.html#delete_unsafe_attributes-instance_method" title="Redmine::SafeAttributes#delete_unsafe_attributes (method)">#delete_unsafe_attributes</a></span>, <span class='object_link'><a href="Redmine/SafeAttributes.html#included-class_method" title="Redmine::SafeAttributes.included (method)">included</a></span>, <span class='object_link'><a href="Redmine/SafeAttributes.html#safe_attribute%3F-instance_method" title="Redmine::SafeAttributes#safe_attribute? (method)">#safe_attribute?</a></span></p>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(attributes = nil, *args)  &#x21d2; <tt><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of Issue.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_attributes'>attributes</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>super</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_new_record?'>new_record?</span>
    <span class='comment'># set default values for new records only
</span>    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_priority'>priority</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="IssuePriority.html" title="IssuePriority (class)">IssuePriority</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default'><span class='object_link'><a href="Enumeration.html#default-class_method" title="Enumeration.default (method)">default</a></span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_watcher_user_ids'>watcher_user_ids</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="deleted_attachment_ids=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="deleted_attachment_ids-instance_method">
  
    #<strong>deleted_attachment_ids</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


458
459
460</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 458</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deleted_attachment_ids'>deleted_attachment_ids</span>
  <span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='lparen'>(</span><span class='ivar'>@deleted_attachment_ids</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_i</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="transition_warning-instance_method">
  
    #<strong>transition_warning</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute transition_warning.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 62</span>

<span class='kw'>def</span> <span class='id identifier rubyid_transition_warning'>transition_warning</span>
  <span class='ivar'>@transition_warning</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="allowed_target_projects-class_method">
  
    .<strong>allowed_target_projects</strong>(user = User.current, current_project = nil, scope = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a scope of projects that user can assign issues to If current_project is given, it will be included in the scope</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1637
1638
1639
1640
1641
1642
1643
1644
1645
1646
1647
1648</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1637</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_allowed_target_projects'>allowed_target_projects</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='id identifier rubyid_current_project'>current_project</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_condition'>condition</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_allowed_to_condition'><span class='object_link'><a href="Project.html#allowed_to_condition-class_method" title="Project.allowed_to_condition (method)">allowed_to_condition</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='symbol'>:add_issues</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_current_project'>current_project</span>
    <span class='id identifier rubyid_condition'>condition</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_condition'>condition</span><span class='embexpr_end'>}</span><span class='tstring_content'>) OR </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.id = ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_current_project'>current_project</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_scope'>scope</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_scope'>scope</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_condition'>condition</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_having_trackers'>having_trackers</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_target_trackers-class_method">
  
    .<strong>allowed_target_trackers</strong>(project, user = User.current, current_tracker = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a scope of trackers that user can assign project issues to</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1656
1657
1658
1659
1660
1661
1662
1663
1664
1665
1666
1667
1668
1669
1670
1671
1672
1673</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1656</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_allowed_target_trackers'>allowed_target_trackers</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='id identifier rubyid_current_tracker'>current_tracker</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span>
    <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_trackers'>trackers</span><span class='period'>.</span><span class='id identifier rubyid_sorted'>sorted</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_admin?'>admin?</span>
      <span class='id identifier rubyid_roles'>roles</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_roles_for_project'>roles_for_project</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_has_permission?'>has_permission?</span><span class='lparen'>(</span><span class='symbol'>:add_issues</span><span class='rparen'>)</span><span class='rbrace'>}</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_roles'>roles</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_permissions_all_trackers?'>permissions_all_trackers?</span><span class='lparen'>(</span><span class='symbol'>:add_issues</span><span class='rparen'>)</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_tracker_ids'>tracker_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_roles'>roles</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_permissions_tracker_ids'>permissions_tracker_ids</span><span class='lparen'>(</span><span class='symbol'>:add_issues</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_current_tracker'>current_tracker</span>
          <span class='id identifier rubyid_tracker_ids'>tracker_ids</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_current_tracker'>current_tracker</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='id identifier rubyid_scope'>scope</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_tracker_ids'>tracker_ids</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_scope'>scope</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="Tracker.html" title="Tracker (class)">Tracker</a></span></span><span class='period'>.</span><span class='id identifier rubyid_none'>none</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_assigned_to-class_method">
  
    .<strong>by_assigned_to</strong>(project, with_subprojects = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1575
1576
1577</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1575</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_assigned_to'>by_assigned_to</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_count_and_group_by'>count_and_group_by</span><span class='lparen'>(</span><span class='symbol'>:project</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='symbol'>:association</span> <span class='op'>=&gt;</span> <span class='symbol'>:assigned_to</span><span class='comma'>,</span> <span class='symbol'>:with_subprojects</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_author-class_method">
  
    .<strong>by_author</strong>(project, with_subprojects = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1579
1580
1581</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1579</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_author'>by_author</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_count_and_group_by'>count_and_group_by</span><span class='lparen'>(</span><span class='symbol'>:project</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='symbol'>:association</span> <span class='op'>=&gt;</span> <span class='symbol'>:author</span><span class='comma'>,</span> <span class='symbol'>:with_subprojects</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_category-class_method">
  
    .<strong>by_category</strong>(project, with_subprojects = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1571
1572
1573</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1571</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_category'>by_category</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_count_and_group_by'>count_and_group_by</span><span class='lparen'>(</span><span class='symbol'>:project</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='symbol'>:association</span> <span class='op'>=&gt;</span> <span class='symbol'>:category</span><span class='comma'>,</span> <span class='symbol'>:with_subprojects</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_priority-class_method">
  
    .<strong>by_priority</strong>(project, with_subprojects = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1567
1568
1569</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1567</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_priority'>by_priority</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_count_and_group_by'>count_and_group_by</span><span class='lparen'>(</span><span class='symbol'>:project</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='symbol'>:association</span> <span class='op'>=&gt;</span> <span class='symbol'>:priority</span><span class='comma'>,</span> <span class='symbol'>:with_subprojects</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_subproject-class_method">
  
    .<strong>by_subproject</strong>(project)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1583
1584
1585
1586</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1583</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_subproject'>by_subproject</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='id identifier rubyid_count_and_group_by'>count_and_group_by</span><span class='lparen'>(</span><span class='symbol'>:project</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='symbol'>:with_subprojects</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:association</span> <span class='op'>=&gt;</span> <span class='symbol'>:project</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>project_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_tracker-class_method">
  
    .<strong>by_tracker</strong>(project, with_subprojects = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1559
1560
1561</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1559</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_tracker'>by_tracker</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_count_and_group_by'>count_and_group_by</span><span class='lparen'>(</span><span class='symbol'>:project</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='symbol'>:association</span> <span class='op'>=&gt;</span> <span class='symbol'>:tracker</span><span class='comma'>,</span> <span class='symbol'>:with_subprojects</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_version-class_method">
  
    .<strong>by_version</strong>(project, with_subprojects = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1563
1564
1565</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1563</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_version'>by_version</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_count_and_group_by'>count_and_group_by</span><span class='lparen'>(</span><span class='symbol'>:project</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='symbol'>:association</span> <span class='op'>=&gt;</span> <span class='symbol'>:fixed_version</span><span class='comma'>,</span> <span class='symbol'>:with_subprojects</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_with_subprojects'>with_subprojects</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="count_and_group_by-class_method">
  
    .<strong>count_and_group_by</strong>(options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Query generator for selecting groups of issue counts for a project based on specific criteria</p>

<p>Options</p>
<ul><li>
<p>project - Project to search in.</p>
</li><li>
<p>with_subprojects - Includes subprojects issues if set to true.</p>
</li><li>
<p>association - Symbol. Association for grouping.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1595
1596
1597
1598
1599
1600
1601
1602
1603
1604
1605
1606
1607
1608
1609
1610
1611
1612
1613
1614</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1595</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_count_and_group_by'>count_and_group_by</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_assoc'>assoc</span> <span class='op'>=</span> <span class='id identifier rubyid_reflect_on_association'>reflect_on_association</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:association</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_select_field'>select_field</span> <span class='op'>=</span> <span class='id identifier rubyid_assoc'>assoc</span><span class='period'>.</span><span class='id identifier rubyid_foreign_key'>foreign_key</span>

  <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span>
    <span class='id identifier rubyid_visible'>visible</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'><span class='object_link'><a href="User.html#current-class_method" title="User.current (method)">current</a></span></span><span class='comma'>,</span> <span class='symbol'>:project</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:project</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:with_subprojects</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:with_subprojects</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:status</span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='symbol'>:status_id</span><span class='comma'>,</span> <span class='symbol'>:is_closed</span><span class='comma'>,</span> <span class='id identifier rubyid_select_field'>select_field</span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_count'>count</span><span class='period'>.</span>
    <span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_columns'>columns</span><span class='comma'>,</span> <span class='id identifier rubyid_total'>total</span><span class='op'>|</span>
      <span class='id identifier rubyid_status_id'>status_id</span><span class='comma'>,</span> <span class='id identifier rubyid_is_closed'>is_closed</span><span class='comma'>,</span> <span class='id identifier rubyid_field_value'>field_value</span> <span class='op'>=</span> <span class='id identifier rubyid_columns'>columns</span>
      <span class='id identifier rubyid_is_closed'>is_closed</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>true</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_is_closed'>is_closed</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
      <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>status_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_status_id'>status_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>closed</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_is_closed'>is_closed</span><span class='comma'>,</span>
        <span class='id identifier rubyid_select_field'>select_field</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_field_value'>field_value</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>total</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_total'>total</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
      <span class='rbrace'>}</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cross_project_scope-class_method">
  
    .<strong>cross_project_scope</strong>(project, scope = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an issue scope based on project and scope</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1532
1533
1534
1535
1536
1537
1538
1539
1540
1541
1542
1543
1544
1545
1546
1547
1548
1549
1550
1551
1552
1553
1554
1555
1556
1557</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1532</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_cross_project_scope'>cross_project_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span>
  <span class='kw'>end</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_scope'>scope</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>all</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>system</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tree</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:project</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.lft &gt;= :lft AND </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.rgt &lt;= :rgt)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                <span class='symbol'>:lft</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_lft'>lft</span><span class='comma'>,</span> <span class='symbol'>:rgt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_rgt'>rgt</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hierarchy</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:project</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.lft &gt;= :lft AND </span><span class='tstring_end'>&quot;</span></span> \
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.rgt &lt;= :rgt) OR </span><span class='tstring_end'>&quot;</span></span> \
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.lft &lt; :lft AND </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.rgt &gt; :rgt)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='symbol'>:lft</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_lft'>lft</span><span class='comma'>,</span> <span class='symbol'>:rgt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_rgt'>rgt</span>
      <span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>descendants</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:project</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.lft &gt;= :lft AND </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.rgt &lt;= :rgt)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                <span class='symbol'>:lft</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_lft'>lft</span><span class='comma'>,</span> <span class='symbol'>:rgt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_rgt'>rgt</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:project_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_relations-class_method">
  
    .<strong>load_relations</strong>(issues)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Preloads relations for a collection of issues</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1187
1188
1189
1190
1191
1192
1193
1194
1195
1196
1197
1198
1199
1200</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1187</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_load_relations'>load_relations</span><span class='lparen'>(</span><span class='id identifier rubyid_issues'>issues</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_relations'>relations</span> <span class='op'>=</span>
      <span class='const'><span class='object_link'><a href="IssueRelation.html" title="IssueRelation (class)">IssueRelation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>issue_from_id IN (:ids) OR issue_to_id IN (:ids)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:ids</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span>
      <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span>
    <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_issue'>issue</span><span class='op'>|</span>
      <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span>
        <span class='symbol'>:@relations</span><span class='comma'>,</span>
        <span class='id identifier rubyid_relations'>relations</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_issue_from_id'>issue_from_id</span> <span class='op'>==</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>||</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_issue_to_id'>issue_to_id</span> <span class='op'>==</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span>
      <span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_visible_last_notes-class_method">
  
    .<strong>load_visible_last_notes</strong>(issues, user = User.current)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Preloads visible last notes for a collection of issues</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1276
1277
1278
1279
1280
1281
1282
1283
1284
1285
1286
1287
1288
1289
1290
1291
1292
1293</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1276</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_load_visible_last_notes'>load_visible_last_notes</span><span class='lparen'>(</span><span class='id identifier rubyid_issues'>issues</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_issue_ids'>issue_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_journal_ids'>journal_ids</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Journal.html" title="Journal (class)">Journal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='label'>issue:</span> <span class='symbol'>:project</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:journalized_type</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Issue</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:journalized_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_issue_ids'>issue_ids</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Journal.html" title="Journal (class)">Journal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_visible_notes_condition'><span class='object_link'><a href="Journal.html#visible_notes_condition-class_method" title="Journal.visible_notes_condition (method)">visible_notes_condition</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='symbol'>:skip_pre_condition</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_where'>where</span><span class='period'>.</span><span class='id identifier rubyid_not'>not</span><span class='lparen'>(</span><span class='label'>notes:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='symbol'>:journalized_id</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_maximum'>maximum</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_values'>values</span>
    <span class='id identifier rubyid_journals'>journals</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Journal.html" title="Journal (class)">Journal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_journal_ids'>journal_ids</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>

    <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_issue'>issue</span><span class='op'>|</span>
      <span class='id identifier rubyid_journal'>journal</span> <span class='op'>=</span> <span class='id identifier rubyid_journals'>journals</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_j'>j</span><span class='op'>|</span> <span class='id identifier rubyid_j'>j</span><span class='period'>.</span><span class='id identifier rubyid_journalized_id'>journalized_id</span> <span class='op'>==</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='symbol'>:@last_notes</span><span class='comma'>,</span> <span class='id identifier rubyid_journal'>journal</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:notes</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_visible_last_updated_by-class_method">
  
    .<strong>load_visible_last_updated_by</strong>(issues, user = User.current)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Preloads users who updated last a collection of issues</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1257
1258
1259
1260
1261
1262
1263
1264
1265
1266
1267
1268
1269
1270
1271
1272
1273</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1257</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_load_visible_last_updated_by'>load_visible_last_updated_by</span><span class='lparen'>(</span><span class='id identifier rubyid_issues'>issues</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_issue_ids'>issue_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_journal_ids'>journal_ids</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Journal.html" title="Journal (class)">Journal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='label'>issue:</span> <span class='symbol'>:project</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:journalized_type</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Issue</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:journalized_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_issue_ids'>issue_ids</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Journal.html" title="Journal (class)">Journal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_visible_notes_condition'><span class='object_link'><a href="Journal.html#visible_notes_condition-class_method" title="Journal.visible_notes_condition (method)">visible_notes_condition</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='symbol'>:skip_pre_condition</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='symbol'>:journalized_id</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_maximum'>maximum</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_values'>values</span>
    <span class='id identifier rubyid_journals'>journals</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Journal.html" title="Journal (class)">Journal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_journal_ids'>journal_ids</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_preload'>preload</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>

    <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_issue'>issue</span><span class='op'>|</span>
      <span class='id identifier rubyid_journal'>journal</span> <span class='op'>=</span> <span class='id identifier rubyid_journals'>journals</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_j'>j</span><span class='op'>|</span> <span class='id identifier rubyid_j'>j</span><span class='period'>.</span><span class='id identifier rubyid_journalized_id'>journalized_id</span> <span class='op'>==</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='symbol'>:@last_updated_by</span><span class='comma'>,</span> <span class='id identifier rubyid_journal'>journal</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_visible_relations-class_method">
  
    .<strong>load_visible_relations</strong>(issues, user = User.current)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Preloads visible relations for a collection of issues</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1226
1227
1228
1229
1230
1231
1232
1233
1234
1235
1236
1237
1238
1239
1240
1241
1242
1243
1244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1226</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_load_visible_relations'>load_visible_relations</span><span class='lparen'>(</span><span class='id identifier rubyid_issues'>issues</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_issue_ids'>issue_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span>
    <span class='comment'># Relations with issue_from in given issues and visible issue_to
</span>    <span class='id identifier rubyid_relations_from'>relations_from</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="IssueRelation.html" title="IssueRelation (class)">IssueRelation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:issue_to</span> <span class='op'>=&gt;</span> <span class='symbol'>:project</span><span class='rparen'>)</span><span class='period'>.</span>
                       <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_visible_condition'>visible_condition</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:issue_from_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_issue_ids'>issue_ids</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
    <span class='comment'># Relations with issue_to in given issues and visible issue_from
</span>    <span class='id identifier rubyid_relations_to'>relations_to</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="IssueRelation.html" title="IssueRelation (class)">IssueRelation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:issue_from</span> <span class='op'>=&gt;</span> <span class='symbol'>:project</span><span class='rparen'>)</span><span class='period'>.</span>
                       <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_visible_condition'>visible_condition</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span>
                       <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:issue_to_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_issue_ids'>issue_ids</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
    <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_issue'>issue</span><span class='op'>|</span>
      <span class='id identifier rubyid_relations'>relations</span> <span class='op'>=</span>
        <span class='id identifier rubyid_relations_from'>relations_from</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_relation'>relation</span><span class='op'>|</span> <span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_issue_from_id'>issue_from_id</span> <span class='op'>==</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span> <span class='op'>+</span>
        <span class='id identifier rubyid_relations_to'>relations_to</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_relation'>relation</span><span class='op'>|</span> <span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_issue_to_id'>issue_to_id</span> <span class='op'>==</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span>

      <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbol'>:@relations</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="IssueRelation.html" title="IssueRelation (class)">IssueRelation</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="IssueRelation/Relations.html" title="IssueRelation::Relations (class)">Relations</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="IssueRelation/Relations.html#initialize-instance_method" title="IssueRelation::Relations#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_issue'>issue</span><span class='comma'>,</span> <span class='id identifier rubyid_relations'>relations</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_visible_spent_hours-class_method">
  
    .<strong>load_visible_spent_hours</strong>(issues, user = User.current)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Preloads visible spent time for a collection of issues</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1203
1204
1205
1206
1207
1208
1209
1210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1203</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_load_visible_spent_hours'>load_visible_spent_hours</span><span class='lparen'>(</span><span class='id identifier rubyid_issues'>issues</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_hours_by_issue_id'>hours_by_issue_id</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeEntry.html" title="TimeEntry (class)">TimeEntry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_visible'>visible</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:issue_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='symbol'>:issue_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='symbol'>:hours</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_issue'>issue</span><span class='op'>|</span>
      <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbol'>:@spent_hours</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_hours_by_issue_id'>hours_by_issue_id</span><span class='lbracket'>[</span><span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='float'>0.0</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_visible_total_spent_hours-class_method">
  
    .<strong>load_visible_total_spent_hours</strong>(issues, user = User.current)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Preloads visible total spent time for a collection of issues</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1213
1214
1215
1216
1217
1218
1219
1220
1221
1222
1223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1213</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_load_visible_total_spent_hours'>load_visible_total_spent_hours</span><span class='lparen'>(</span><span class='id identifier rubyid_issues'>issues</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_hours_by_issue_id'>hours_by_issue_id</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeEntry.html" title="TimeEntry (class)">TimeEntry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_visible'>visible</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:issue</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>JOIN </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> parent ON parent.root_id = </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.root_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> AND parent.lft &lt;= </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.lft AND parent.rgt &gt;= </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.rgt</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>parent.id IN (?)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>parent.id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='symbol'>:hours</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_issue'>issue</span><span class='op'>|</span>
      <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbol'>:@total_spent_hours</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_hours_by_issue_id'>hours_by_issue_id</span><span class='lbracket'>[</span><span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='float'>0.0</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="self_and_descendants-class_method">
  
    .<strong>self_and_descendants</strong>(issues)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a scope of the given issues and their descendants</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1247
1248
1249
1250
1251
1252
1253
1254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1247</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_self_and_descendants'>self_and_descendants</span><span class='lparen'>(</span><span class='id identifier rubyid_issues'>issues</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>JOIN </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> ancestors</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> ON ancestors.root_id = </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.root_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> AND ancestors.lft &lt;= </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.lft AND ancestors.rgt &gt;= </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.rgt</span><span class='tstring_end'>&quot;</span></span>
  <span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:ancestors</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_versions-class_method">
  
    .<strong>update_versions</strong>(conditions = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Update issues so their versions are not pointing to a fixed_version that is not shared with the issue&#39;s project</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1880
1881
1882
1883
1884
1885
1886
1887
1888
1889
1890
1891
1892
1893
1894
1895
1896</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1880</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_versions'>update_versions</span><span class='lparen'>(</span><span class='id identifier rubyid_conditions'>conditions</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='comment'># Only need to update issues with a fixed_version from
</span>  <span class='comment'># a different project and that is not systemwide shared
</span>  <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:project</span><span class='comma'>,</span> <span class='symbol'>:fixed_version</span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.fixed_version_id IS NOT NULL</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> AND </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.project_id &lt;&gt; </span><span class='embexpr_beg'>#{</span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Version.html" title="Version (class)">Version</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.project_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> AND </span><span class='embexpr_beg'>#{</span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Version.html" title="Version (class)">Version</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.sharing &lt;&gt; &#39;system&#39;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_conditions'>conditions</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_issue'>issue</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_fixed_version'>fixed_version</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_shared_versions'>shared_versions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_fixed_version'>fixed_version</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_init_journal'>init_journal</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'><span class='object_link'><a href="User.html#current-class_method" title="User.current (method)">current</a></span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_fixed_version'>fixed_version</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_versions_from_hierarchy_change-class_method">
  
    .<strong>update_versions_from_hierarchy_change</strong>(project)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Unassigns issues from versions that are no longer shared after <code>project</code> was moved</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1475
1476
1477
1478
1479
1480
1481
1482
1483</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1475</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_versions_from_hierarchy_change'>update_versions_from_hierarchy_change</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_moved_project_ids'>moved_project_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_self_and_descendants'>self_and_descendants</span><span class='period'>.</span><span class='id identifier rubyid_reload'>reload</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span>
  <span class='comment'># Update issues of the moved projects and issues assigned to a version of a moved project
</span>  <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span>
    <span class='id identifier rubyid_update_versions'>update_versions</span><span class='lparen'>(</span>
      <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Version.html" title="Version (class)">Version</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.project_id IN (?) OR </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.project_id IN (?)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
       <span class='id identifier rubyid_moved_project_ids'>moved_project_ids</span><span class='comma'>,</span> <span class='id identifier rubyid_moved_project_ids'>moved_project_ids</span><span class='rbracket'>]</span>
    <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_versions_from_sharing_change-class_method">
  
    .<strong>update_versions_from_sharing_change</strong>(version)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Unassigns issues from <code>version</code> if it&#39;s no longer shared with issue&#39;s project</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1468
1469
1470
1471</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1468</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_versions_from_sharing_change'>update_versions_from_sharing_change</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
  <span class='comment'># Update issues assigned to the version
</span>  <span class='id identifier rubyid_update_versions'>update_versions</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.fixed_version_id = ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="use_field_for_done_ratio?-class_method">
  
    .<strong>use_field_for_done_ratio?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


746
747
748</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 746</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_use_field_for_done_ratio?'>use_field_for_done_ratio?</span>
  <span class='const'><span class='object_link'><a href="Setting.html" title="Setting (class)">Setting</a></span></span><span class='period'>.</span><span class='id identifier rubyid_issue_done_ratio'>issue_done_ratio</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>issue_field</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="use_status_for_done_ratio?-class_method">
  
    .<strong>use_status_for_done_ratio?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


742
743
744</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 742</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_use_status_for_done_ratio?'>use_status_for_done_ratio?</span>
  <span class='const'><span class='object_link'><a href="Setting.html" title="Setting (class)">Setting</a></span></span><span class='period'>.</span><span class='id identifier rubyid_issue_done_ratio'>issue_done_ratio</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>issue_status</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="visible_condition-class_method">
  
    .<strong>visible_condition</strong>(user, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a SQL conditions string used to find all issues visible by the specified user</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 128</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_visible_condition'>visible_condition</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_allowed_to_condition'><span class='object_link'><a href="Project.html#allowed_to_condition-class_method" title="Project.allowed_to_condition (method)">allowed_to_condition</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='symbol'>:view_issues</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_role'>role</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>|</span>
    <span class='id identifier rubyid_sql'>sql</span> <span class='op'>=</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_logged?'>logged?</span>
        <span class='kw'>case</span> <span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_issues_visibility'>issues_visibility</span>
        <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>all</span><span class='tstring_end'>&#39;</span></span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1=1</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>default</span><span class='tstring_end'>&#39;</span></span>
          <span class='id identifier rubyid_user_ids'>user_ids</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_groups'>groups</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.is_private = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_quoted_false'>quoted_false</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> \
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OR </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.author_id = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> \
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OR </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.assigned_to_id IN (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_ids'>user_ids</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>))</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>own</span><span class='tstring_end'>&#39;</span></span>
          <span class='id identifier rubyid_user_ids'>user_ids</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_groups'>groups</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.author_id = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'> OR </span><span class='tstring_end'>&quot;</span></span> \
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.assigned_to_id IN (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_ids'>user_ids</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>))</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>else</span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1=0</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.is_private = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_quoted_false'>quoted_false</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_permissions_all_trackers?'>permissions_all_trackers?</span><span class='lparen'>(</span><span class='symbol'>:view_issues</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_tracker_ids'>tracker_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_permissions_tracker_ids'>permissions_tracker_ids</span><span class='lparen'>(</span><span class='symbol'>:view_issues</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_tracker_ids'>tracker_ids</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
        <span class='id identifier rubyid_sql'>sql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sql'>sql</span><span class='embexpr_end'>}</span><span class='tstring_content'> AND </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.tracker_id IN (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tracker_ids'>tracker_ids</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>))</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_sql'>sql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1=0</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_sql'>sql</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="<=>-instance_method">
  
    #<strong>&lt;=&gt;</strong>(issue)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1436
1437
1438
1439
1440
1441
1442
1443
1444</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1436</span>

<span class='kw'>def</span> <span class='op'>&lt;=&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid_issue'>issue</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='op'>-</span><span class='int'>1</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_root_id'>root_id</span> <span class='op'>!=</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_root_id'>root_id</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_root_id'>root_id</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>&lt;=&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_root_id'>root_id</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_lft'>lft</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>&lt;=&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_lft'>lft</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_target_projects-instance_method">
  
    #<strong>allowed_target_projects</strong>(user = User.current, scope = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a scope of projects that user can assign the issue to</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1626
1627
1628
1629
1630
1631
1632
1633</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1626</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_target_projects'>allowed_target_projects</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current_project'>current_project</span> <span class='op'>=</span> <span class='id identifier rubyid_new_record?'>new_record?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_scope'>scope</span>
    <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='id identifier rubyid_filter_projects_scope'>filter_projects_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_allowed_target_projects'>allowed_target_projects</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_current_project'>current_project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_target_projects_for_subtask-instance_method">
  
    #<strong>allowed_target_projects_for_subtask</strong>(user = User.current)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a scope of projects that user can assign the subtask</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1617
1618
1619
1620
1621
1622
1623</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1617</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_target_projects_for_subtask'>allowed_target_projects_for_subtask</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_parent_issue_id'>parent_issue_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='id identifier rubyid_filter_projects_scope'>filter_projects_scope</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Setting.html" title="Setting (class)">Setting</a></span></span><span class='period'>.</span><span class='id identifier rubyid_cross_project_subtasks'>cross_project_subtasks</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_allowed_target_projects'>allowed_target_projects</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_target_trackers-instance_method">
  
    #<strong>allowed_target_trackers</strong>(user = User.current)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a scope of trackers that user can assign the issue to</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1651
1652
1653</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1651</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_target_trackers'>allowed_target_trackers</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_allowed_target_trackers'>allowed_target_trackers</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_tracker_id_was'>tracker_id_was</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assign_attributes-instance_method">
  
    #<strong>assign_attributes</strong>(new_attributes, *args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Overrides assign_attributes so that project and tracker get assigned first</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


463
464
465
466
467
468
469
470
471
472
473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 463</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assign_attributes'>assign_attributes</span><span class='lparen'>(</span><span class='id identifier rubyid_new_attributes'>new_attributes</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_new_attributes'>new_attributes</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='id identifier rubyid_new_attributes'>new_attributes</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_stringify_keys!'>stringify_keys!</span>

  <span class='qwords_beg'>%w(</span><span class='tstring_content'>project</span><span class='words_sep'> </span><span class='tstring_content'>project_id</span><span class='words_sep'> </span><span class='tstring_content'>tracker</span><span class='words_sep'> </span><span class='tstring_content'>tracker_id</span><span class='tstring_end'>)</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attr'>attr</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_send'>send</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attr'>attr</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>super</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assignable_users-instance_method">
  
    #<strong>assignable_users</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Users the issue can be assigned to</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


986
987
988
989
990
991
992
993
994
995</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 986</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assignable_users'>assignable_users</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_assignable_users'>assignable_users</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='id identifier rubyid_users'>users</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_author'>author</span> <span class='kw'>if</span> <span class='id identifier rubyid_author'>author</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_author'>author</span><span class='period'>.</span><span class='id identifier rubyid_active?'>active?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_assigned_to_id_was'>assigned_to_id_was</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_assignee'>assignee</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Principal.html" title="Principal (class)">Principal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_assigned_to_id_was'>assigned_to_id_was</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_users'>users</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_assignee'>assignee</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assignable_versions-instance_method">
  
    #<strong>assignable_versions</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Versions that the issue can be assigned to</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


998
999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010
1011
1012
1013
1014
1015</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 998</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assignable_versions'>assignable_versions</span>
  <span class='kw'>return</span> <span class='ivar'>@assignable_versions</span> <span class='kw'>if</span> <span class='ivar'>@assignable_versions</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_versions'>versions</span> <span class='op'>=</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_shared_versions'>shared_versions</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_fixed_version'>fixed_version</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_fixed_version_id_changed?'>fixed_version_id_changed?</span>
      <span class='comment'># nothing to do
</span>    <span class='kw'>elsif</span> <span class='id identifier rubyid_project_id_changed?'>project_id_changed?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_shared_versions'>shared_versions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_fixed_version'>fixed_version</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_versions'>versions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_fixed_version'>fixed_version</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_versions'>versions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_fixed_version'>fixed_version</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='ivar'>@assignable_versions</span> <span class='op'>=</span> <span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="attachments_addable?-instance_method">
  
    #<strong>attachments_addable?</strong>(user = User.current)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


199
200
201</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 199</span>

<span class='kw'>def</span> <span class='id identifier rubyid_attachments_addable?'>attachments_addable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attributes_editable?'>attributes_editable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_notes_addable?'>notes_addable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="attachments_deletable?-instance_method">
  
    #<strong>attachments_deletable?</strong>(user = User.current)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Overrides Redmine::Acts::Attachable::InstanceMethods#attachments_deletable?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 219</span>

<span class='kw'>def</span> <span class='id identifier rubyid_attachments_deletable?'>attachments_deletable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attributes_editable?'>attributes_editable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="attachments_editable?-instance_method">
  
    #<strong>attachments_editable?</strong>(user = User.current)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Overrides Redmine::Acts::Attachable::InstanceMethods#attachments_editable?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 204</span>

<span class='kw'>def</span> <span class='id identifier rubyid_attachments_editable?'>attachments_editable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attributes_editable?'>attributes_editable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="attributes=-instance_method">
  
    #<strong>attributes=</strong>(new_attributes)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


477
478
479</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 477</span>

<span class='kw'>def</span> <span class='id identifier rubyid_attributes='>attributes=</span><span class='lparen'>(</span><span class='id identifier rubyid_new_attributes'>new_attributes</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_assign_attributes'>assign_attributes</span> <span class='id identifier rubyid_new_attributes'>new_attributes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="attributes_editable?-instance_method">
  
    #<strong>attributes_editable?</strong>(user = User.current)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if user or current user is allowed to edit the issue</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


193
194
195
196
197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 193</span>

<span class='kw'>def</span> <span class='id identifier rubyid_attributes_editable?'>attributes_editable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_user_tracker_permission?'>user_tracker_permission?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='symbol'>:edit_issues</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span>
    <span class='id identifier rubyid_user_tracker_permission?'>user_tracker_permission?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='symbol'>:edit_own_issues</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_author'>author</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="available_custom_fields-instance_method">
  
    #<strong>available_custom_fields</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Overrides Redmine::Acts::Customizable::InstanceMethods#available_custom_fields</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


275
276
277</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 275</span>

<span class='kw'>def</span> <span class='id identifier rubyid_available_custom_fields'>available_custom_fields</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_all_issue_custom_fields'>all_issue_custom_fields</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_custom_fields'>custom_fields</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="base_reload-instance_method">
  
    #<strong>base_reload</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 261</span>

<span class='kw'>alias</span> <span class='symbol'>:base_reload</span> <span class='symbol'>:reload</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="behind_schedule?-instance_method">
  
    #<strong>behind_schedule?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Is the amount of work done less than it should for the due date</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


973
974
975
976
977
978</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 973</span>

<span class='kw'>def</span> <span class='id identifier rubyid_behind_schedule?'>behind_schedule?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_start_date'>start_date</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_due_date'>due_date</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_done_date'>done_date</span> <span class='op'>=</span> <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_due_date'>due_date</span> <span class='op'>-</span> <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_done_ratio'>done_ratio</span> <span class='op'>/</span> <span class='int'>100</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_done_date'>done_date</span> <span class='op'>&lt;=</span> <span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'><span class='object_link'><a href="User.html#current-class_method" title="User.current (method)">current</a></span></span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="blocked?-instance_method">
  
    #<strong>blocked?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if this issue is blocked by another issue that is still open</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1018
1019
1020</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1018</span>

<span class='kw'>def</span> <span class='id identifier rubyid_blocked?'>blocked?</span>
  <span class='op'>!</span><span class='id identifier rubyid_relations_to'>relations_to</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_ir'>ir</span><span class='op'>|</span> <span class='id identifier rubyid_ir'>ir</span><span class='period'>.</span><span class='id identifier rubyid_relation_type'>relation_type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>blocks</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_ir'>ir</span><span class='period'>.</span><span class='id identifier rubyid_issue_from'>issue_from</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="blocks?-instance_method">
  
    #<strong>blocks?</strong>(other)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if this issue blocks the other issue, otherwise returns false</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1301
1302
1303
1304
1305
1306
1307
1308
1309
1310
1311
1312
1313
1314
1315
1316
1317</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1301</span>

<span class='kw'>def</span> <span class='id identifier rubyid_blocks?'>blocks?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_all'>all</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_last'>last</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span>
      <span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='id identifier rubyid_i'>i</span><span class='period'>.</span><span class='id identifier rubyid_relations_from'>relations_from</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:relation_type</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="IssueRelation.html" title="IssueRelation (class)">IssueRelation</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="IssueRelation.html#TYPE_BLOCKS-constant" title="IssueRelation::TYPE_BLOCKS (constant)">TYPE_BLOCKS</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:issue_to</span><span class='rparen'>)</span>
      <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
    <span class='id identifier rubyid_current'>current</span> <span class='op'>-=</span> <span class='id identifier rubyid_last'>last</span>
    <span class='id identifier rubyid_current'>current</span> <span class='op'>-=</span> <span class='id identifier rubyid_all'>all</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_last'>last</span> <span class='op'>=</span> <span class='id identifier rubyid_current'>current</span>
    <span class='id identifier rubyid_all'>all</span> <span class='op'>+=</span> <span class='id identifier rubyid_last'>last</span>
  <span class='kw'>end</span>
  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="category_id=-instance_method">
  
    #<strong>category_id=</strong>(cid)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


354
355
356
357</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 354</span>

<span class='kw'>def</span> <span class='id identifier rubyid_category_id='>category_id=</span><span class='lparen'>(</span><span class='id identifier rubyid_cid'>cid</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_category'>category</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='symbol'>:category_id</span><span class='comma'>,</span> <span class='id identifier rubyid_cid'>cid</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="children?-instance_method">
  
    #<strong>children?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Does this issue have children?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


981
982
983</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 981</span>

<span class='kw'>def</span> <span class='id identifier rubyid_children?'>children?</span>
  <span class='op'>!</span><span class='id identifier rubyid_leaf?'>leaf?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_journal-instance_method">
  
    #<strong>clear_journal</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clears the current journal</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


875
876
877</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 875</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_journal'>clear_journal</span>
  <span class='ivar'>@current_journal</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="closable?-instance_method">
  
    #<strong>closable?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if this issue can be closed and if not, returns false and populates the reason</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1023</span>

<span class='kw'>def</span> <span class='id identifier rubyid_closable?'>closable?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_descendants'>descendants</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='ivar'>@transition_warning</span> <span class='op'>=</span> <span class='id identifier rubyid_l'>l</span><span class='lparen'>(</span><span class='symbol'>:notice_issue_not_closable_by_open_tasks</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_blocked?'>blocked?</span>
    <span class='ivar'>@transition_warning</span> <span class='op'>=</span> <span class='id identifier rubyid_l'>l</span><span class='lparen'>(</span><span class='symbol'>:notice_issue_not_closable_by_blocking_issue</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="closed?-instance_method">
  
    #<strong>closed?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return true if the issue is closed, otherwise false</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


939
940
941</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 939</span>

<span class='kw'>def</span> <span class='id identifier rubyid_closed?'>closed?</span>
  <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_is_closed?'>is_closed?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="closing?-instance_method">
  
    #<strong>closing?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return true if the issue is being closed</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


959
960
961
962
963
964
965</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 959</span>

<span class='kw'>def</span> <span class='id identifier rubyid_closing?'>closing?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_new_record?'>new_record?</span>
    <span class='id identifier rubyid_closed?'>closed?</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_status_id_changed?'>status_id_changed?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_closed?'>closed?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_was_closed?'>was_closed?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="copy-instance_method">
  
    #<strong>copy</strong>(attributes = nil, copy_options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an unsaved copy of the issue</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


323
324
325
326
327</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 323</span>

<span class='kw'>def</span> <span class='id identifier rubyid_copy'>copy</span><span class='lparen'>(</span><span class='id identifier rubyid_attributes'>attributes</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_copy_options'>copy_options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_copy'>copy</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_copy_from'>copy_from</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_copy_options'>copy_options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_copy'>copy</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span> <span class='op'>=</span> <span class='id identifier rubyid_attributes'>attributes</span> <span class='kw'>if</span> <span class='id identifier rubyid_attributes'>attributes</span>
  <span class='id identifier rubyid_copy'>copy</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="copy?-instance_method">
  
    #<strong>copy?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the issue is a copy</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


330
331
332</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 330</span>

<span class='kw'>def</span> <span class='id identifier rubyid_copy?'>copy?</span>
  <span class='ivar'>@copied_from</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="copy_from-instance_method">
  
    #<strong>copy_from</strong>(arg, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Copies attributes from another issue, arg can be an id or an Issue</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 292</span>

<span class='kw'>def</span> <span class='id identifier rubyid_copy_from'>copy_from</span><span class='lparen'>(</span><span class='id identifier rubyid_arg'>arg</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_issue'>issue</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_arg'>arg</span> <span class='op'>:</span> <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_visible'>visible</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_arg'>arg</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span> <span class='op'>=</span>
    <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='period'>.</span><span class='id identifier rubyid_except'>except</span><span class='lparen'>(</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>parent_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lft</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rgt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>created_on</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>updated_on</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>status_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>closed_on</span><span class='tstring_end'>&quot;</span></span>
    <span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_custom_field_values'>custom_field_values</span> <span class='op'>=</span>
    <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_custom_field_values'>custom_field_values</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_custom_field_id'>custom_field_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
      <span class='id identifier rubyid_h'>h</span>
    <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:keep_status</span><span class='rbracket'>]</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_author'>author</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'><span class='object_link'><a href="User.html#current-class_method" title="User.current (method)">current</a></span></span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:attachments</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_attachments'>attachments</span> <span class='op'>=</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_attachments'>attachments</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attachement'>attachement</span><span class='op'>|</span>
      <span class='id identifier rubyid_attachement'>attachement</span><span class='period'>.</span><span class='id identifier rubyid_copy'>copy</span><span class='lparen'>(</span><span class='symbol'>:container</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:watchers</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_watcher_user_ids'>watcher_user_ids</span> <span class='op'>=</span>
      <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_watcher_users'>watcher_users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_u'>u</span><span class='op'>|</span> <span class='id identifier rubyid_u'>u</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Principal.html#STATUS_ACTIVE-constant" title="Principal::STATUS_ACTIVE (constant)">STATUS_ACTIVE</a></span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@copied_from</span> <span class='op'>=</span> <span class='id identifier rubyid_issue'>issue</span>
  <span class='ivar'>@copy_options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="css_classes-instance_method">
  
    #<strong>css_classes</strong>(user = User.current)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a string of css classes that apply to the issue</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1451
1452
1453
1454
1455
1456
1457
1458
1459
1460
1461
1462
1463
1464
1465</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1451</span>

<span class='kw'>def</span> <span class='id identifier rubyid_css_classes'>css_classes</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>issue tracker-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tracker_id'>tracker_id</span><span class='embexpr_end'>}</span><span class='tstring_content'> status-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_status_id'>status_id</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_priority'>priority</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:css_classes</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> closed</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_closed?'>closed?</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> overdue</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_overdue?'>overdue?</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> child</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_child?'>child?</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> parent</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_leaf?'>leaf?</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> private</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_is_private?'>is_private?</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> behind-schedule</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_behind_schedule?'>behind_schedule?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_logged?'>logged?</span>
    <span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> created-by-me</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_author_id'>author_id</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> assigned-to-me</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_assigned_to_id'>assigned_to_id</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> assigned-to-my-group</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_groups'>groups</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_g'>g</span><span class='op'>|</span> <span class='id identifier rubyid_g'>g</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='id identifier rubyid_assigned_to_id'>assigned_to_id</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_s'>s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_journal-instance_method">
  
    #<strong>current_journal</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the current journal or nil if it&#39;s not initialized</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


870
871
872</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 870</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_journal'>current_journal</span>
  <span class='ivar'>@current_journal</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dates_derived?-instance_method">
  
    #<strong>dates_derived?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1424
1425
1426</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1424</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dates_derived?'>dates_derived?</span>
  <span class='op'>!</span><span class='id identifier rubyid_leaf?'>leaf?</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="Setting.html" title="Setting (class)">Setting</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parent_issue_dates'>parent_issue_dates</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>derived</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_status-instance_method">
  
    #<strong>default_status</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the default status of the issue based on its tracker Returns nil if tracker is nil</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1046
1047
1048</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1046</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_status'>default_status</span>
  <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:default_status</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deletable?-instance_method">
  
    #<strong>deletable?</strong>(user = User.current)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if user or current user is allowed to delete the issue</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 214</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deletable?'>deletable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_user_tracker_permission?'>user_tracker_permission?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='symbol'>:delete_issues</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="description=-instance_method">
  
    #<strong>description=</strong>(arg)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


451
452
453
454
455
456</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 451</span>

<span class='kw'>def</span> <span class='id identifier rubyid_description='>description=</span><span class='lparen'>(</span><span class='id identifier rubyid_arg'>arg</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_arg'>arg</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\r\n|\n|\r)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='symbol'>:description</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy-instance_method">
  
    #<strong>destroy</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>AR#Persistence#destroy would raise and RecordNotFound exception if the issue was already deleted or updated (non matching lock_version). This is a problem when bulk deleting issues or deleting a project (because an issue may already be deleted if its parent was deleted first). The issue is reloaded by the nested_set before being deleted so the lock_version condition should not be an issue but we handle it.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248
249
250
251
252
253
254
255
256
257
258
259</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 246</span>

<span class='kw'>def</span> <span class='id identifier rubyid_destroy'>destroy</span>
  <span class='kw'>super</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>StaleObjectError</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>RecordNotFound</span>
  <span class='comment'># Stale or already deleted
</span>  <span class='kw'>begin</span>
    <span class='id identifier rubyid_reload'>reload</span>
  <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>RecordNotFound</span>
    <span class='comment'># The issue was actually already deleted
</span>    <span class='ivar'>@destroyed</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_freeze'>freeze</span>
  <span class='kw'>end</span>
  <span class='comment'># The issue was stale, retry to destroy
</span>  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disabled_core_fields-instance_method">
  
    #<strong>disabled_core_fields</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


632
633
634</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 632</span>

<span class='kw'>def</span> <span class='id identifier rubyid_disabled_core_fields'>disabled_core_fields</span>
  <span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>?</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_disabled_core_fields'>disabled_core_fields</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="done_ratio-instance_method">
  
    #<strong>done_ratio</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


734
735
736
737
738
739
740</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 734</span>

<span class='kw'>def</span> <span class='id identifier rubyid_done_ratio'>done_ratio</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_use_status_for_done_ratio?'><span class='object_link'><a href="#use_status_for_done_ratio%3F-class_method" title="Issue.use_status_for_done_ratio? (method)">use_status_for_done_ratio?</a></span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_status'>status</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_default_done_ratio'>default_done_ratio</span>
    <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_default_done_ratio'>default_done_ratio</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_read_attribute'>read_attribute</span><span class='lparen'>(</span><span class='symbol'>:done_ratio</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="done_ratio_derived?-instance_method">
  
    #<strong>done_ratio_derived?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1432
1433
1434</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1432</span>

<span class='kw'>def</span> <span class='id identifier rubyid_done_ratio_derived?'>done_ratio_derived?</span>
  <span class='op'>!</span><span class='id identifier rubyid_leaf?'>leaf?</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="Setting.html" title="Setting (class)">Setting</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parent_issue_done_ratio'>parent_issue_done_ratio</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>derived</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="due_before-instance_method">
  
    #<strong>due_before</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the due date or the target due date if any Used on gantt chart</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1346
1347
1348</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1346</span>

<span class='kw'>def</span> <span class='id identifier rubyid_due_before'>due_before</span>
  <span class='id identifier rubyid_due_date'>due_date</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_fixed_version'>fixed_version</span> <span class='op'>?</span> <span class='id identifier rubyid_fixed_version'>fixed_version</span><span class='period'>.</span><span class='id identifier rubyid_effective_date'>effective_date</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="duplicates-instance_method">
  
    #<strong>duplicates</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of issues that duplicate this one</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1340
1341
1342</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1340</span>

<span class='kw'>def</span> <span class='id identifier rubyid_duplicates'>duplicates</span>
  <span class='id identifier rubyid_relations_to'>relations_to</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_relation_type'>relation_type</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="IssueRelation.html" title="IssueRelation (class)">IssueRelation</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="IssueRelation.html#TYPE_DUPLICATES-constant" title="IssueRelation::TYPE_DUPLICATES (constant)">TYPE_DUPLICATES</a></span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_issue_from'>issue_from</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="duration-instance_method">
  
    #<strong>duration</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the time scheduled for this issue.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby">Start Date: 2/26/09, End Date: 3/04/09
duration =&gt; 6
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1355
1356
1357</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1355</span>

<span class='kw'>def</span> <span class='id identifier rubyid_duration'>duration</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_due_date'>due_date</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_due_date'>due_date</span> <span class='op'>-</span> <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>:</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="editable?-instance_method">
  
    #<strong>editable?</strong>(user = User.current)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if user or current user is allowed to edit or add notes to the issue</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 188</span>

<span class='kw'>def</span> <span class='id identifier rubyid_editable?'>editable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attributes_editable?'>attributes_editable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_notes_addable?'>notes_addable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="editable_custom_field_values-instance_method">
  
    #<strong>editable_custom_field_values</strong>(user = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the custom_field_values that can be edited by the given user</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


637
638
639
640
641
642</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 637</span>

<span class='kw'>def</span> <span class='id identifier rubyid_editable_custom_field_values'>editable_custom_field_values</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_read_only'>read_only</span> <span class='op'>=</span> <span class='id identifier rubyid_read_only_attribute_names'>read_only_attribute_names</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_visible_custom_field_values'>visible_custom_field_values</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_read_only'>read_only</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_custom_field_id'>custom_field_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="editable_custom_fields-instance_method">
  
    #<strong>editable_custom_fields</strong>(user = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the custom fields that can be edited by the given user</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


645
646
647</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 645</span>

<span class='kw'>def</span> <span class='id identifier rubyid_editable_custom_fields'>editable_custom_fields</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_editable_custom_field_values'>editable_custom_field_values</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:custom_field</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="estimated_hours=-instance_method">
  
    #<strong>estimated_hours=</strong>(h)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


481
482
483</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 481</span>

<span class='kw'>def</span> <span class='id identifier rubyid_estimated_hours='>estimated_hours=</span><span class='lparen'>(</span><span class='id identifier rubyid_h'>h</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_write_attribute'>write_attribute</span> <span class='symbol'>:estimated_hours</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='lparen'>(</span><span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_to_hours'>to_hours</span> <span class='op'>||</span> <span class='id identifier rubyid_h'>h</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_h'>h</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_relation-instance_method">
  
    #<strong>find_relation</strong>(relation_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Finds an issue relation given its id.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1296
1297
1298</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1296</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_relation'>find_relation</span><span class='lparen'>(</span><span class='id identifier rubyid_relation_id'>relation_id</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="IssueRelation.html" title="IssueRelation (class)">IssueRelation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>issue_to_id = ? OR issue_from_id = ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_relation_id'>relation_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fixed_version_id=-instance_method">
  
    #<strong>fixed_version_id=</strong>(vid)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


359
360
361
362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 359</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fixed_version_id='>fixed_version_id=</span><span class='lparen'>(</span><span class='id identifier rubyid_vid'>vid</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fixed_version'>fixed_version</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='symbol'>:fixed_version_id</span><span class='comma'>,</span> <span class='id identifier rubyid_vid'>vid</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="init_journal-instance_method">
  
    #<strong>init_journal</strong>(user, notes = &quot;&quot;)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


865
866
867</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 865</span>

<span class='kw'>def</span> <span class='id identifier rubyid_init_journal'>init_journal</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_notes'>notes</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@current_journal</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="Journal.html" title="Journal (class)">Journal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Journal.html#initialize-instance_method" title="Journal#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='symbol'>:journalized</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='symbol'>:notes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_notes'>notes</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="journalized_attribute_names-instance_method">
  
    #<strong>journalized_attribute_names</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the names of attributes that are journalized when updating the issue</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


880
881
882
883
884
885
886</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 880</span>

<span class='kw'>def</span> <span class='id identifier rubyid_journalized_attribute_names'>journalized_attribute_names</span>
  <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_column_names'>column_names</span> <span class='op'>-</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>id</span><span class='words_sep'> </span><span class='tstring_content'>root_id</span><span class='words_sep'> </span><span class='tstring_content'>lft</span><span class='words_sep'> </span><span class='tstring_content'>rgt</span><span class='words_sep'> </span><span class='tstring_content'>lock_version</span><span class='words_sep'> </span><span class='tstring_content'>created_on</span><span class='words_sep'> </span><span class='tstring_content'>updated_on</span><span class='words_sep'> </span><span class='tstring_content'>closed_on</span><span class='tstring_end'>)</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_tracker'>tracker</span>
    <span class='id identifier rubyid_names'>names</span> <span class='op'>-=</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_disabled_core_fields'>disabled_core_fields</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_names'>names</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="journals_after-instance_method">
  
    #<strong>journals_after</strong>(journal_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a scope for journals that have an id greater than journal_id</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


898
899
900
901
902
903
904</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 898</span>

<span class='kw'>def</span> <span class='id identifier rubyid_journals_after'>journals_after</span><span class='lparen'>(</span><span class='id identifier rubyid_journal_id'>journal_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='id identifier rubyid_journals'>journals</span><span class='period'>.</span><span class='id identifier rubyid_reorder'>reorder</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Journal.html" title="Journal (class)">Journal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.id ASC</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_journal_id'>journal_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='id identifier rubyid_scope'>scope</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Journal.html" title="Journal (class)">Journal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.id &gt; ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_journal_id'>journal_id</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_scope'>scope</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last_journal_id-instance_method">
  
    #<strong>last_journal_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the id of the last journal or nil</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


889
890
891
892
893
894
895</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 889</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_journal_id'>last_journal_id</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_new_record?'>new_record?</span>
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_journals'>journals</span><span class='period'>.</span><span class='id identifier rubyid_maximum'>maximum</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last_notes-instance_method">
  
    #<strong>last_notes</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1178
1179
1180
1181
1182
1183
1184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1178</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_notes'>last_notes</span>
  <span class='kw'>if</span> <span class='ivar'>@last_notes</span>
    <span class='ivar'>@last_notes</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_journals'>journals</span><span class='period'>.</span><span class='id identifier rubyid_visible'>visible</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='period'>.</span><span class='id identifier rubyid_not'>not</span><span class='lparen'>(</span><span class='label'>notes:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reorder'>reorder</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='symbol'>:desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:notes</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last_updated_by-instance_method">
  
    #<strong>last_updated_by</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1170
1171
1172
1173
1174
1175
1176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1170</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_updated_by'>last_updated_by</span>
  <span class='kw'>if</span> <span class='ivar'>@last_updated_by</span>
    <span class='ivar'>@last_updated_by</span><span class='period'>.</span><span class='id identifier rubyid_presence'>presence</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_journals'>journals</span><span class='period'>.</span><span class='id identifier rubyid_reorder'>reorder</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='symbol'>:desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="new_statuses_allowed_to-instance_method">
  
    #<strong>new_statuses_allowed_to</strong>(user = User.current, include_default = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of statuses that user is able to apply</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1051
1052
1053
1054
1055
1056
1057
1058
1059
1060
1061
1062
1063
1064
1065
1066
1067
1068
1069
1070
1071
1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1051</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new_statuses_allowed_to'>new_statuses_allowed_to</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='id identifier rubyid_include_default'>include_default</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_initial_status'>initial_status</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_new_record?'>new_record?</span>
    <span class='comment'># nop
</span>  <span class='kw'>elsif</span> <span class='id identifier rubyid_tracker_id_changed?'>tracker_id_changed?</span>
    <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="Tracker.html" title="Tracker (class)">Tracker</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_tracker_id_was'>tracker_id_was</span><span class='comma'>,</span> <span class='symbol'>:default_status_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_status_id_was'>status_id_was</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_initial_status'>initial_status</span> <span class='op'>=</span> <span class='id identifier rubyid_default_status'>default_status</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_issue_status_ids'>issue_status_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_status_id_was'>status_id_was</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_initial_status'>initial_status</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="IssueStatus.html" title="IssueStatus (class)">IssueStatus</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_status_id_was'>status_id_was</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_initial_status'>initial_status</span> <span class='op'>=</span> <span class='id identifier rubyid_default_status'>default_status</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_initial_status'>initial_status</span> <span class='op'>=</span> <span class='id identifier rubyid_status_was'>status_was</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_initial_assigned_to_id'>initial_assigned_to_id</span> <span class='op'>=</span> <span class='id identifier rubyid_assigned_to_id_changed?'>assigned_to_id_changed?</span> <span class='op'>?</span> <span class='id identifier rubyid_assigned_to_id_was'>assigned_to_id_was</span> <span class='op'>:</span> <span class='id identifier rubyid_assigned_to_id'>assigned_to_id</span>
  <span class='id identifier rubyid_assignee_transitions_allowed'>assignee_transitions_allowed</span> <span class='op'>=</span> <span class='id identifier rubyid_initial_assigned_to_id'>initial_assigned_to_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='id identifier rubyid_initial_assigned_to_id'>initial_assigned_to_id</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_group_ids'>group_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_initial_assigned_to_id'>initial_assigned_to_id</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_statuses'>statuses</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_statuses'>statuses</span> <span class='op'>+=</span> <span class='const'><span class='object_link'><a href="IssueStatus.html" title="IssueStatus (class)">IssueStatus</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new_statuses_allowed'><span class='object_link'><a href="IssueStatus.html#new_statuses_allowed-class_method" title="IssueStatus.new_statuses_allowed (method)">new_statuses_allowed</a></span></span><span class='lparen'>(</span>
    <span class='id identifier rubyid_initial_status'>initial_status</span><span class='comma'>,</span>
    <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_admin'>admin</span> <span class='op'>?</span> <span class='const'><span class='object_link'><a href="Role.html" title="Role (class)">Role</a></span></span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span> <span class='op'>:</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_roles_for_project'>roles_for_project</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_tracker'>tracker</span><span class='comma'>,</span>
    <span class='id identifier rubyid_author'>author</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span>
    <span class='id identifier rubyid_assignee_transitions_allowed'>assignee_transitions_allowed</span>
  <span class='rparen'>)</span>
  <span class='id identifier rubyid_statuses'>statuses</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_initial_status'>initial_status</span> <span class='kw'>unless</span> <span class='id identifier rubyid_statuses'>statuses</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_statuses'>statuses</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_default_status'>default_status</span> <span class='kw'>if</span> <span class='id identifier rubyid_include_default'>include_default</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_new_record?'>new_record?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_statuses'>statuses</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_statuses'>statuses</span> <span class='op'>=</span> <span class='id identifier rubyid_statuses'>statuses</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_closable?'>closable?</span>
    <span class='comment'># cannot close a blocked issue or a parent with open subtasks
</span>    <span class='id identifier rubyid_statuses'>statuses</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:is_closed?</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_reopenable?'>reopenable?</span>
    <span class='comment'># cannot reopen a subtask of a closed parent
</span>    <span class='id identifier rubyid_statuses'>statuses</span><span class='period'>.</span><span class='id identifier rubyid_select!'>select!</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:is_closed?</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_statuses'>statuses</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notes_addable?-instance_method">
  
    #<strong>notes_addable?</strong>(user = User.current)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if user or current user is allowed to add notes to the issue</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 209</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notes_addable?'>notes_addable?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_user_tracker_permission?'>user_tracker_permission?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='symbol'>:add_issue_notes</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notified_users-instance_method">
  
    #<strong>notified_users</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the users that should be notified</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1114
1115
1116
1117
1118
1119
1120
1121
1122
1123
1124
1125
1126
1127
1128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1114</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notified_users'>notified_users</span>
  <span class='comment'># Author and assignee are always notified unless they have been
</span>  <span class='comment'># locked or don&#39;t want to be notified
</span>  <span class='id identifier rubyid_notified'>notified</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_author'>author</span><span class='comma'>,</span> <span class='id identifier rubyid_assigned_to'>assigned_to</span><span class='comma'>,</span> <span class='id identifier rubyid_previous_assignee'>previous_assignee</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
  <span class='id identifier rubyid_notified'>notified</span> <span class='op'>=</span> <span class='id identifier rubyid_notified'>notified</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Group.html" title="Group (class)">Group</a></span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_n'>n</span><span class='period'>.</span><span class='id identifier rubyid_users'>users</span> <span class='op'>:</span> <span class='id identifier rubyid_n'>n</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span>
  <span class='id identifier rubyid_notified'>notified</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
  <span class='id identifier rubyid_notified'>notified</span> <span class='op'>=</span> <span class='id identifier rubyid_notified'>notified</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_u'>u</span><span class='op'>|</span> <span class='id identifier rubyid_u'>u</span><span class='period'>.</span><span class='id identifier rubyid_active?'>active?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_u'>u</span><span class='period'>.</span><span class='id identifier rubyid_notify_about?'>notify_about?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='rbrace'>}</span>

  <span class='id identifier rubyid_notified'>notified</span> <span class='op'>+=</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_notified_users'>notified_users</span>
  <span class='id identifier rubyid_notified'>notified</span> <span class='op'>+=</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_preload'>preload</span><span class='lparen'>(</span><span class='symbol'>:preference</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:notify_about_high_priority_issues?</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_priority'>priority</span><span class='period'>.</span><span class='id identifier rubyid_high?'>high?</span>
  <span class='id identifier rubyid_notified'>notified</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
  <span class='comment'># Remove users that can not view the issue
</span>  <span class='id identifier rubyid_notified'>notified</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_user'>user</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_visible?'>visible?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_notified'>notified</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify=-instance_method">
  
    #<strong>notify=</strong>(arg)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1139
1140
1141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1139</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify='>notify=</span><span class='lparen'>(</span><span class='id identifier rubyid_arg'>arg</span><span class='rparen'>)</span>
  <span class='ivar'>@notify</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify?-instance_method">
  
    #<strong>notify?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1135
1136
1137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify?'>notify?</span>
  <span class='ivar'>@notify</span> <span class='op'>!=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="overdue?-instance_method">
  
    #<strong>overdue?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the issue is overdue</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


968
969
970</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 968</span>

<span class='kw'>def</span> <span class='id identifier rubyid_overdue?'>overdue?</span>
  <span class='id identifier rubyid_due_date'>due_date</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_due_date'>due_date</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'><span class='object_link'><a href="User.html#current-class_method" title="User.current (method)">current</a></span></span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_closed?'>closed?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parent_issue_id-instance_method">
  
    #<strong>parent_issue_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1498
1499
1500
1501
1502
1503
1504
1505
1506</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1498</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parent_issue_id'>parent_issue_id</span>
  <span class='kw'>if</span> <span class='ivar'>@invalid_parent_issue_id</span>
    <span class='ivar'>@invalid_parent_issue_id</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_instance_variable_defined?'>instance_variable_defined?</span> <span class='symbol'>:@parent_issue</span>
    <span class='ivar'>@parent_issue</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='ivar'>@parent_issue</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_parent_id'>parent_id</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parent_issue_id=-instance_method">
  
    #<strong>parent_issue_id=</strong>(arg)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1485
1486
1487
1488
1489
1490
1491
1492
1493
1494
1495
1496</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1485</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parent_issue_id='>parent_issue_id=</span><span class='lparen'>(</span><span class='id identifier rubyid_arg'>arg</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_presence'>presence</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_s'>s</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>\A#?(\d+)\z</span><span class='regexp_end'>}</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='ivar'>@parent_issue</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='ivar'>@invalid_parent_issue_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='ivar'>@parent_issue</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@invalid_parent_issue_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='ivar'>@parent_issue</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@invalid_parent_issue_id</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="previous_assignee-instance_method">
  
    #<strong>previous_assignee</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the previous assignee whenever we&#39;re before the save or in after_* callbacks</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1101
1102
1103
1104
1105
1106
1107
1108
1109
1110
1111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_previous_assignee'>previous_assignee</span>
  <span class='id identifier rubyid_previous_assigned_to_id'>previous_assigned_to_id</span> <span class='op'>=</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_assigned_to_id_change_to_be_saved'>assigned_to_id_change_to_be_saved</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_assigned_to_id_before_last_save'>assigned_to_id_before_last_save</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_assigned_to_id_in_database'>assigned_to_id_in_database</span>
    <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_previous_assigned_to_id'>previous_assigned_to_id</span>
    <span class='const'><span class='object_link'><a href="Principal.html" title="Principal (class)">Principal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_previous_assigned_to_id'>previous_assigned_to_id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="priority_derived?-instance_method">
  
    #<strong>priority_derived?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1428
1429
1430</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1428</span>

<span class='kw'>def</span> <span class='id identifier rubyid_priority_derived?'>priority_derived?</span>
  <span class='op'>!</span><span class='id identifier rubyid_leaf?'>leaf?</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="Setting.html" title="Setting (class)">Setting</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parent_issue_priority'>parent_issue_priority</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>derived</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="priority_id=-instance_method">
  
    #<strong>priority_id=</strong>(pid)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


349
350
351
352</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 349</span>

<span class='kw'>def</span> <span class='id identifier rubyid_priority_id='>priority_id=</span><span class='lparen'>(</span><span class='id identifier rubyid_pid'>pid</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_priority'>priority</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='symbol'>:priority_id</span><span class='comma'>,</span> <span class='id identifier rubyid_pid'>pid</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="project=-instance_method">
  
    #<strong>project=</strong>(project, keep_tracker = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the project. Unless keep_tracker argument is set to true, this will change the tracker to the first tracker of the new project if the previous tracker is not part of the new project trackers. This will:</p>
<ul><li>
<p>clear the fixed_version is it&#39;s no longer valid for the new project.</p>
</li><li>
<p>clear the parent issue if it&#39;s no longer valid for the new project.</p>
</li><li>
<p>set the category to the category with the same name in the new project if it exists, or clear it if it doesn&#39;t.</p>
</li><li>
<p>for new issue, set the fixed_version to the project default version if it&#39;s a valid fixed_version.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 410</span>

<span class='kw'>def</span> <span class='id identifier rubyid_project='>project=</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_keep_tracker'>keep_tracker</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_project_was'>project_was</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span>
  <span class='id identifier rubyid_association'>association</span><span class='lparen'>(</span><span class='symbol'>:project</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_writer'>writer</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span> <span class='op'>!=</span> <span class='id identifier rubyid_project_was'>project_was</span>
    <span class='ivar'>@safe_attribute_names</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_project_was'>project_was</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project_was'>project_was</span> <span class='op'>!=</span> <span class='id identifier rubyid_project'>project</span>
    <span class='ivar'>@assignable_versions</span> <span class='op'>=</span> <span class='kw'>nil</span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_keep_tracker'>keep_tracker</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_trackers'>trackers</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>=</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_trackers'>trackers</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='kw'>end</span>
    <span class='comment'># Reassign to the category with same name if any
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_category'>category</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_category'>category</span> <span class='op'>=</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_issue_categories'>issue_categories</span><span class='period'>.</span><span class='id identifier rubyid_find_by_name'>find_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_category'>category</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='comment'># Clear the assignee if not available in the new project for new issues (eg. copy)
</span>    <span class='comment'># For existing issue, the previous assignee is still valid, so we keep it
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_new_record?'>new_record?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_assigned_to'>assigned_to</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_assignable_users'>assignable_users</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_assigned_to'>assigned_to</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assigned_to_id'>assigned_to_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    <span class='comment'># Keep the fixed_version if it&#39;s still valid in the new_project
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_fixed_version'>fixed_version</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_fixed_version'>fixed_version</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span> <span class='op'>!=</span> <span class='id identifier rubyid_project'>project</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_shared_versions'>shared_versions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_fixed_version'>fixed_version</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fixed_version'>fixed_version</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    <span class='comment'># Clear the parent task if it&#39;s no longer valid
</span>    <span class='kw'>unless</span> <span class='id identifier rubyid_valid_parent_project?'>valid_parent_project?</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parent_issue_id'>parent_issue_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_reassign_custom_field_values'>reassign_custom_field_values</span>
    <span class='ivar'>@workflow_rule_by_attribute</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='comment'># Set fixed_version to the project default version if it&#39;s valid
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_new_record?'>new_record?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_fixed_version'>fixed_version</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_default_version_id?'>default_version_id?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_shared_versions'>shared_versions</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_default_version_id'>default_version_id</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fixed_version_id'>fixed_version_id</span> <span class='op'>=</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_default_version_id'>default_version_id</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="project_id=-instance_method">
  
    #<strong>project_id=</strong>(project_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


392
393
394
395
396
397</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 392</span>

<span class='kw'>def</span> <span class='id identifier rubyid_project_id='>project_id=</span><span class='lparen'>(</span><span class='id identifier rubyid_project_id'>project_id</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_project_id'>project_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>!=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_project_id'>project_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_project_id'>project_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_project_id'>project_id</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_project_id'>project_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_only_attribute_names-instance_method">
  
    #<strong>read_only_attribute_names</strong>(user = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the names of attributes that are read-only for user or the current user For users with multiple roles, the read-only fields are the intersection of read-only fields of each role The result is an array of strings where sustom fields are represented with their ids</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_read_only_attribute_names'>read_only_attribute_names</span> <span class='comment'># =&gt; [&#39;due_date&#39;, &#39;2&#39;]
</span><span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_read_only_attribute_names'>read_only_attribute_names</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span> <span class='comment'># =&gt; []
</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


657
658
659</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 657</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_only_attribute_names'>read_only_attribute_names</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_workflow_rule_by_attribute'>workflow_rule_by_attribute</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_rule'>rule</span><span class='op'>|</span> <span class='id identifier rubyid_rule'>rule</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>readonly</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="recipients-instance_method">
  
    #<strong>recipients</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the email addresses that should be notified</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1131
1132
1133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1131</span>

<span class='kw'>def</span> <span class='id identifier rubyid_recipients'>recipients</span>
  <span class='id identifier rubyid_notified_users'>notified_users</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:mail</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="relations-instance_method">
  
    #<strong>relations</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1166
1167
1168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1166</span>

<span class='kw'>def</span> <span class='id identifier rubyid_relations'>relations</span>
  <span class='ivar'>@relations</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="IssueRelation.html" title="IssueRelation (class)">IssueRelation</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="IssueRelation/Relations.html" title="IssueRelation::Relations (class)">Relations</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="IssueRelation/Relations.html#initialize-instance_method" title="IssueRelation::Relations#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_relations_from'>relations_from</span> <span class='op'>+</span> <span class='id identifier rubyid_relations_to'>relations_to</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reload-instance_method">
  
    #<strong>reload</strong>(*args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264
265
266
267
268
269
270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 262</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reload'>reload</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='ivar'>@workflow_rule_by_attribute</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@assignable_versions</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@relations</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@spent_hours</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@total_spent_hours</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@total_estimated_hours</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@last_updated_by</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@last_notes</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_base_reload'>base_reload</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reopenable?-instance_method">
  
    #<strong>reopenable?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if this issue can be reopen and if not, returns false and populates the reason</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1036
1037
1038
1039
1040
1041
1042</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1036</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reopenable?'>reopenable?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_ancestors'>ancestors</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='ivar'>@transition_warning</span> <span class='op'>=</span> <span class='id identifier rubyid_l'>l</span><span class='lparen'>(</span><span class='symbol'>:notice_issue_not_reopenable_by_closed_parent_issue</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reopening?-instance_method">
  
    #<strong>reopening?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='reopened?-instance_method'>reopened?</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return true if the issue is being reopened</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


949
950
951
952
953
954
955</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 949</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reopening?'>reopening?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_new_record?'>new_record?</span>
    <span class='kw'>false</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_status_id_changed?'>status_id_changed?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_closed?'>closed?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_was_closed?'>was_closed?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="required_attribute?-instance_method">
  
    #<strong>required_attribute?</strong>(name, user = nil)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the attribute is required for user</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


674
675
676</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 674</span>

<span class='kw'>def</span> <span class='id identifier rubyid_required_attribute?'>required_attribute?</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_required_attribute_names'>required_attribute_names</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="required_attribute_names-instance_method">
  
    #<strong>required_attribute_names</strong>(user = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the names of required attributes for user or the current user For users with multiple roles, the required fields are the intersection of required fields of each role The result is an array of strings where sustom fields are represented with their ids</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_required_attribute_names'>required_attribute_names</span> <span class='comment'># =&gt; [&#39;due_date&#39;, &#39;2&#39;]
</span><span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_required_attribute_names'>required_attribute_names</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span> <span class='comment'># =&gt; []
</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


669
670
671</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 669</span>

<span class='kw'>def</span> <span class='id identifier rubyid_required_attribute_names'>required_attribute_names</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_workflow_rule_by_attribute'>workflow_rule_by_attribute</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_rule'>rule</span><span class='op'>|</span> <span class='id identifier rubyid_rule'>rule</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>required</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reschedule_on-instance_method">
  
    #<strong>reschedule_on</strong>(date)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets start_date on the given date or the next working day and changes due_date to keep the same working duration.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1379
1380
1381
1382
1383
1384</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1379</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reschedule_on'>reschedule_on</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_wd'>wd</span> <span class='op'>=</span> <span class='id identifier rubyid_working_duration'>working_duration</span>
  <span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='id identifier rubyid_next_working_date'>next_working_date</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>=</span> <span class='id identifier rubyid_date'>date</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_due_date'>due_date</span> <span class='op'>=</span> <span class='id identifier rubyid_add_working_days'>add_working_days</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='comma'>,</span> <span class='id identifier rubyid_wd'>wd</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reschedule_on!-instance_method">
  
    #<strong>reschedule_on!</strong>(date, journal = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Reschedules the issue on the given date or the next working day and saves the record. If the issue is a parent task, this is done by rescheduling its subtasks.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1388
1389
1390
1391
1392
1393
1394
1395
1396
1397
1398
1399
1400
1401
1402
1403
1404
1405
1406
1407
1408
1409
1410
1411
1412
1413
1414
1415
1416
1417
1418
1419
1420
1421
1422</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1388</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reschedule_on!'>reschedule_on!</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='comma'>,</span> <span class='id identifier rubyid_journal'>journal</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_date'>date</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_leaf?'>leaf?</span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_dates_derived?'>dates_derived?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_start_date'>start_date</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>!=</span> <span class='id identifier rubyid_date'>date</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_date'>date</span>
        <span class='comment'># Issue can not be moved earlier than its soonest start date
</span>        <span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_soonest_start'>soonest_start</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_date'>date</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_journal'>journal</span>
        <span class='id identifier rubyid_init_journal'>init_journal</span><span class='lparen'>(</span><span class='id identifier rubyid_journal'>journal</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_reschedule_on'>reschedule_on</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_save'>save</span>
      <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>StaleObjectError</span>
        <span class='id identifier rubyid_reload'>reload</span>
        <span class='id identifier rubyid_reschedule_on'>reschedule_on</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_save'>save</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_leaves'>leaves</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_leaf'>leaf</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_leaf'>leaf</span><span class='period'>.</span><span class='id identifier rubyid_start_date'>start_date</span>
        <span class='comment'># Only move subtask if it starts at the same date as the parent
</span>        <span class='comment'># or if it starts before the given date
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>==</span> <span class='id identifier rubyid_leaf'>leaf</span><span class='period'>.</span><span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>||</span> <span class='id identifier rubyid_date'>date</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_leaf'>leaf</span><span class='period'>.</span><span class='id identifier rubyid_start_date'>start_date</span>
          <span class='id identifier rubyid_leaf'>leaf</span><span class='period'>.</span><span class='id identifier rubyid_reschedule_on!'>reschedule_on!</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_leaf'>leaf</span><span class='period'>.</span><span class='id identifier rubyid_reschedule_on!'>reschedule_on!</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="safe_attribute_names-instance_method">
  
    #<strong>safe_attribute_names</strong>(user = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 528</span>

<span class='kw'>def</span> <span class='id identifier rubyid_safe_attribute_names'>safe_attribute_names</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='kw'>super</span>
  <span class='id identifier rubyid_names'>names</span> <span class='op'>-=</span> <span class='id identifier rubyid_disabled_core_fields'>disabled_core_fields</span>
  <span class='id identifier rubyid_names'>names</span> <span class='op'>-=</span> <span class='id identifier rubyid_read_only_attribute_names'>read_only_attribute_names</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_new_record?'>new_record?</span>
    <span class='comment'># Make sure that project_id can always be set for new issues
</span>    <span class='id identifier rubyid_names'>names</span> <span class='op'>|=</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>project_id</span><span class='tstring_end'>)</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_dates_derived?'>dates_derived?</span>
    <span class='id identifier rubyid_names'>names</span> <span class='op'>-=</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>start_date</span><span class='words_sep'> </span><span class='tstring_content'>due_date</span><span class='tstring_end'>)</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_priority_derived?'>priority_derived?</span>
    <span class='id identifier rubyid_names'>names</span> <span class='op'>-=</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>priority_id</span><span class='tstring_end'>)</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_done_ratio_derived?'>done_ratio_derived?</span>
    <span class='id identifier rubyid_names'>names</span> <span class='op'>-=</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>done_ratio</span><span class='tstring_end'>)</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_names'>names</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="safe_attributes=-instance_method">
  
    #<strong>safe_attributes=</strong>(attrs, user = User.current)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Safely sets attributes Should be called from controllers instead of #attributes= attr_accessible is too rough because we still want things like Issue.new(:project =&gt; foo) to work</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 552</span>

<span class='kw'>def</span> <span class='id identifier rubyid_safe_attributes='>safe_attributes=</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:to_unsafe_hash</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_to_unsafe_hash'>to_unsafe_hash</span>
  <span class='kw'>end</span>

  <span class='ivar'>@attributes_set_by</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_deep_dup'>deep_dup</span>

  <span class='comment'># Project and Tracker must be set before since new_statuses_allowed_to depends on it.
</span>  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>project_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_safe_attribute?'>safe_attribute?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>project_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\d*$</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_p_id'>p_id</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_identifier'>find_by_identifier</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_p_id'>p_id</span> <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_allowed_target_projects'>allowed_target_projects</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p_id'>p_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_project_id'>project_id</span> <span class='op'>=</span> <span class='id identifier rubyid_p_id'>p_id</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_project_id_changed?'>project_id_changed?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>category_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>category_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_category_id_was'>category_id_was</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
      <span class='comment'># Discard submitted category on previous project
</span>      <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>category_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tracker_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_safe_attribute?'>safe_attribute?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tracker_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_allowed_target_trackers'>allowed_target_trackers</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tracker_id'>tracker_id</span> <span class='op'>=</span> <span class='id identifier rubyid_t'>t</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># Set a default tracker to accept custom field values
</span>    <span class='comment'># even if tracker is not specified
</span>    <span class='id identifier rubyid_allowed_trackers'>allowed_trackers</span> <span class='op'>=</span> <span class='id identifier rubyid_allowed_target_trackers'>allowed_target_trackers</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>parent_issue_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='comment'># If parent_issue_id is present, the first tracker for which this field
</span>      <span class='comment'># is not disabled is chosen as default
</span>      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>=</span> <span class='id identifier rubyid_allowed_trackers'>allowed_trackers</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_core_fields'>core_fields</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>parent_issue_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>||=</span> <span class='id identifier rubyid_allowed_trackers'>allowed_trackers</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_statuses_allowed'>statuses_allowed</span> <span class='op'>=</span> <span class='id identifier rubyid_new_statuses_allowed_to'>new_statuses_allowed_to</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>status_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_safe_attribute?'>safe_attribute?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>status_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_statuses_allowed'>statuses_allowed</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status_id'>status_id</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_new_record?'>new_record?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_statuses_allowed'>statuses_allowed</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='id identifier rubyid_statuses_allowed'>statuses_allowed</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>||</span> <span class='id identifier rubyid_default_status'>default_status</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_u'>u</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>assigned_to_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_safe_attribute?'>safe_attribute?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>assigned_to_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assigned_to_id'>assigned_to_id</span> <span class='op'>=</span> <span class='id identifier rubyid_u'>u</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='id identifier rubyid_delete_unsafe_attributes'>delete_unsafe_attributes</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>parent_issue_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>parent_issue_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>\A#?(\d+)\z</span><span class='regexp_end'>}</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_parent_id'>parent_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_visible'>visible</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='ivar'>@invalid_parent_issue_id</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>parent_issue_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom_field_values</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_editable_custom_field_ids'>editable_custom_field_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_editable_custom_field_values'>editable_custom_field_values</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_custom_field_id'>custom_field_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom_field_values</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_select!'>select!</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_editable_custom_field_ids'>editable_custom_field_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom_fields</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_editable_custom_field_ids'>editable_custom_field_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_editable_custom_field_values'>editable_custom_field_values</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_custom_field_id'>custom_field_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom_fields</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_select!'>select!</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_editable_custom_field_ids'>editable_custom_field_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_assign_attributes'>assign_attributes</span> <span class='id identifier rubyid_attrs'>attrs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_custom_field_default?-instance_method">
  
    #<strong>set_custom_field_default?</strong>(custom_value)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Overrides Redmine::Acts::Customizable::InstanceMethods#set_custom_field_default?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


287
288
289</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 287</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_custom_field_default?'>set_custom_field_default?</span><span class='lparen'>(</span><span class='id identifier rubyid_custom_value'>custom_value</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_record?'>new_record?</span> <span class='op'>||</span> <span class='id identifier rubyid_project_id_changed?'>project_id_changed?</span><span class='op'>||</span> <span class='id identifier rubyid_tracker_id_changed?'>tracker_id_changed?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_parent_id-instance_method">
  
    #<strong>set_parent_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1508
1509
1510</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1508</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_parent_id'>set_parent_id</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parent_id'>parent_id</span> <span class='op'>=</span> <span class='id identifier rubyid_parent_issue_id'>parent_issue_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="soonest_start-instance_method">
  
    #<strong>soonest_start</strong>(reload = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1364
1365
1366
1367
1368
1369
1370
1371
1372
1373
1374
1375</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1364</span>

<span class='kw'>def</span> <span class='id identifier rubyid_soonest_start'>soonest_start</span><span class='lparen'>(</span><span class='id identifier rubyid_reload'>reload</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@soonest_start</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_reload'>reload</span>
    <span class='id identifier rubyid_relations_to'>relations_to</span><span class='period'>.</span><span class='id identifier rubyid_reload'>reload</span> <span class='kw'>if</span> <span class='id identifier rubyid_reload'>reload</span>
    <span class='id identifier rubyid_dates'>dates</span> <span class='op'>=</span> <span class='id identifier rubyid_relations_to'>relations_to</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_relation'>relation</span><span class='op'>|</span> <span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_successor_soonest_start'>successor_soonest_start</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='ivar'>@parent_issue</span> <span class='op'>||</span> <span class='id identifier rubyid_parent'>parent</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="Setting.html" title="Setting (class)">Setting</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parent_issue_dates'>parent_issue_dates</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>derived</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_dates'>dates</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_soonest_start'>soonest_start</span>
    <span class='kw'>end</span>
    <span class='ivar'>@soonest_start</span> <span class='op'>=</span> <span class='id identifier rubyid_dates'>dates</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
  <span class='kw'>end</span>
  <span class='ivar'>@soonest_start</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="spent_hours-instance_method">
  
    #<strong>spent_hours</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the number of hours spent on this issue</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1144
1145
1146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1144</span>

<span class='kw'>def</span> <span class='id identifier rubyid_spent_hours'>spent_hours</span>
  <span class='ivar'>@spent_hours</span> <span class='op'>||=</span> <span class='id identifier rubyid_time_entries'>time_entries</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='symbol'>:hours</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='float'>0.0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="status=-instance_method">
  
    #<strong>status=</strong>(status)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the status.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


342
343
344
345
346
347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 342</span>

<span class='kw'>def</span> <span class='id identifier rubyid_status='>status=</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_status'>status</span> <span class='op'>!=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span>
    <span class='ivar'>@workflow_rule_by_attribute</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_association'>association</span><span class='lparen'>(</span><span class='symbol'>:status</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_writer'>writer</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="status_id=-instance_method">
  
    #<strong>status_id=</strong>(status_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


334
335
336
337
338
339</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 334</span>

<span class='kw'>def</span> <span class='id identifier rubyid_status_id='>status_id=</span><span class='lparen'>(</span><span class='id identifier rubyid_status_id'>status_id</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_status_id'>status_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>!=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status_id'>status_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_status_id'>status_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='const'><span class='object_link'><a href="IssueStatus.html" title="IssueStatus (class)">IssueStatus</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_status_id'>status_id</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status_id'>status_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="status_was-instance_method">
  
    #<strong>status_was</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the initial status of the issue Returns nil for a new issue</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


928
929
930
931
932
933
934
935
936</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 928</span>

<span class='kw'>def</span> <span class='id identifier rubyid_status_was'>status_was</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_status_id_changed?'>status_id_changed?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_status_id_was'>status_id_was</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='ivar'>@status_was</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="IssueStatus.html" title="IssueStatus (class)">IssueStatus</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_status_id_was'>status_id_was</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='ivar'>@status_was</span> <span class='op'>||=</span> <span class='id identifier rubyid_status'>status</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    #<strong>to_s</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1446
1447
1448</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1446</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tracker'>tracker</span><span class='embexpr_end'>}</span><span class='tstring_content'> #</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_subject'>subject</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="total_estimated_hours-instance_method">
  
    #<strong>total_estimated_hours</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1158
1159
1160
1161
1162
1163
1164</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1158</span>

<span class='kw'>def</span> <span class='id identifier rubyid_total_estimated_hours'>total_estimated_hours</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_leaf?'>leaf?</span>
    <span class='id identifier rubyid_estimated_hours'>estimated_hours</span>
  <span class='kw'>else</span>
    <span class='ivar'>@total_estimated_hours</span> <span class='op'>||=</span> <span class='id identifier rubyid_self_and_descendants'>self_and_descendants</span><span class='period'>.</span><span class='id identifier rubyid_visible'>visible</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='symbol'>:estimated_hours</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="total_spent_hours-instance_method">
  
    #<strong>total_spent_hours</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the total number of hours spent on this issue and its descendants</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1149
1150
1151
1152
1153
1154
1155
1156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1149</span>

<span class='kw'>def</span> <span class='id identifier rubyid_total_spent_hours'>total_spent_hours</span>
  <span class='ivar'>@total_spent_hours</span> <span class='op'>||=</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_leaf?'>leaf?</span>
      <span class='id identifier rubyid_spent_hours'>spent_hours</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_self_and_descendants'>self_and_descendants</span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:time_entries</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="TimeEntry.html" title="TimeEntry (class)">TimeEntry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.hours</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>||</span> <span class='float'>0.0</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tracker=-instance_method">
  
    #<strong>tracker=</strong>(tracker)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the tracker. This will set the status to the default status of the new tracker if:</p>
<ul><li>
<p>the status was the default for the previous tracker</p>
</li><li>
<p>or if the status was not part of the new tracker statuses</p>
</li><li>
<p>or the status was nil</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


376
377
378
379
380
381
382
383
384
385
386
387
388
389
390</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 376</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tracker='>tracker=</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tracker_was'>tracker_was</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tracker'>tracker</span>
  <span class='id identifier rubyid_association'>association</span><span class='lparen'>(</span><span class='symbol'>:tracker</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_writer'>writer</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>!=</span> <span class='id identifier rubyid_tracker_was'>tracker_was</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='id identifier rubyid_tracker_was'>tracker_was</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:default_status</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_status'>status</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_issue_status_ids'>issue_status_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_reassign_custom_field_values'>reassign_custom_field_values</span>
    <span class='ivar'>@workflow_rule_by_attribute</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>||=</span> <span class='id identifier rubyid_default_status'>default_status</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tracker'>tracker</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tracker_id=-instance_method">
  
    #<strong>tracker_id=</strong>(tracker_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366
367
368
369</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 364</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tracker_id='>tracker_id=</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker_id'>tracker_id</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_tracker_id'>tracker_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>!=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tracker_id'>tracker_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_tracker_id'>tracker_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='const'><span class='object_link'><a href="Tracker.html" title="Tracker (class)">Tracker</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker_id'>tracker_id</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tracker_id'>tracker_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tracker_was-instance_method">
  
    #<strong>tracker_was</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the original tracker</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1095
1096
1097</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1095</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tracker_was'>tracker_was</span>
  <span class='const'><span class='object_link'><a href="Tracker.html" title="Tracker (class)">Tracker</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker_id_in_database'>tracker_id_in_database</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_done_ratio_from_issue_status-instance_method">
  
    #<strong>update_done_ratio_from_issue_status</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Set the done_ratio using the status if that setting is set.  This will keep the done_ratios even if the user turns off the setting later</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


859
860
861
862
863</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 859</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_done_ratio_from_issue_status'>update_done_ratio_from_issue_status</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="" title="Issue (class)">Issue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_use_status_for_done_ratio?'><span class='object_link'><a href="#use_status_for_done_ratio%3F-class_method" title="Issue.use_status_for_done_ratio? (method)">use_status_for_done_ratio?</a></span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_status'>status</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_default_done_ratio'>default_done_ratio</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_done_ratio'>done_ratio</span> <span class='op'>=</span> <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_default_done_ratio'>default_done_ratio</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="valid_parent_project?-instance_method">
  
    #<strong>valid_parent_project?</strong>(issue = parent)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if issue&#39;s project is a valid parent issue project</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1514
1515
1516
1517
1518
1519
1520
1521
1522
1523
1524
1525
1526
1527
1528
1529</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1514</span>

<span class='kw'>def</span> <span class='id identifier rubyid_valid_parent_project?'>valid_parent_project?</span><span class='lparen'>(</span><span class='id identifier rubyid_issue'>issue</span><span class='op'>=</span><span class='id identifier rubyid_parent'>parent</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_project_id'>project_id</span> <span class='op'>==</span> <span class='id identifier rubyid_project_id'>project_id</span>

  <span class='kw'>case</span> <span class='const'><span class='object_link'><a href="Setting.html" title="Setting (class)">Setting</a></span></span><span class='period'>.</span><span class='id identifier rubyid_cross_project_subtasks'>cross_project_subtasks</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>system</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>true</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tree</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span> <span class='op'>==</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hierarchy</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_is_or_is_ancestor_of?'>is_or_is_ancestor_of?</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_is_descendant_of?'>is_descendant_of?</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>descendants</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_issue'>issue</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_is_or_is_ancestor_of?'>is_or_is_ancestor_of?</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_custom_field_values-instance_method">
  
    #<strong>validate_custom_field_values</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Overrides Redmine::Acts::Customizable::InstanceMethods#validate_custom_field_values so that custom values that are not editable are not validated (eg. a custom field that is marked as required should not trigger a validation error if the user is not allowed to edit this field).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


850
851
852
853
854
855</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 850</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_custom_field_values'>validate_custom_field_values</span>
  <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_new_record?'>new_record?</span> <span class='op'>?</span> <span class='id identifier rubyid_author'>author</span> <span class='op'>:</span> <span class='id identifier rubyid_current_journal'>current_journal</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_new_record?'>new_record?</span> <span class='op'>||</span> <span class='id identifier rubyid_custom_field_values_changed?'>custom_field_values_changed?</span>
    <span class='id identifier rubyid_editable_custom_field_values'>editable_custom_field_values</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:validate_value</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_issue-instance_method">
  
    #<strong>validate_issue</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 750</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_issue'>validate_issue</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_due_date'>due_date</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_start_date_changed?'>start_date_changed?</span> <span class='op'>||</span> <span class='id identifier rubyid_due_date_changed?'>due_date_changed?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_due_date'>due_date</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_start_date'>start_date</span>
    <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:due_date</span><span class='comma'>,</span> <span class='symbol'>:greater_than_start_date</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_start_date_changed?'>start_date_changed?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_soonest_start'>soonest_start</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_soonest_start'>soonest_start</span>
    <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:start_date</span><span class='comma'>,</span> <span class='symbol'>:earlier_than_minimum_start_date</span><span class='comma'>,</span> <span class='symbol'>:date</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_format_date'>format_date</span><span class='lparen'>(</span><span class='id identifier rubyid_soonest_start'>soonest_start</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_fixed_version_id'>fixed_version_id</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_fixed_version'>fixed_version</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_assignable_versions'>assignable_versions</span><span class='period'>.</span><span class='id identifier rubyid_exclude?'>exclude?</span><span class='lparen'>(</span><span class='id identifier rubyid_fixed_version'>fixed_version</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:fixed_version_id</span><span class='comma'>,</span> <span class='symbol'>:inclusion</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_reopening?'>reopening?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_fixed_version'>fixed_version</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>
      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:base</span><span class='comma'>,</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='symbol'>:error_can_not_reopen_issue_on_closed_version</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_category_id'>category_id</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_issue_category_ids'>issue_category_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:category_id</span><span class='comma'>,</span> <span class='symbol'>:inclusion</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Checks that the issue can not be added/moved to a disabled tracker
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_tracker_id_changed?'>tracker_id_changed?</span> <span class='op'>||</span> <span class='id identifier rubyid_project_id_changed?'>project_id_changed?</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_trackers'>trackers</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:tracker_id</span><span class='comma'>,</span> <span class='symbol'>:inclusion</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_assigned_to_id_changed?'>assigned_to_id_changed?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_assigned_to_id'>assigned_to_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_assignable_users'>assignable_users</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_assigned_to'>assigned_to</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:assigned_to_id</span><span class='comma'>,</span> <span class='symbol'>:invalid</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Checks parent issue assignment
</span>  <span class='kw'>if</span> <span class='ivar'>@invalid_parent_issue_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:parent_issue_id</span><span class='comma'>,</span> <span class='symbol'>:invalid</span>
  <span class='kw'>elsif</span> <span class='ivar'>@parent_issue</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_valid_parent_project?'>valid_parent_project?</span><span class='lparen'>(</span><span class='ivar'>@parent_issue</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:parent_issue_id</span><span class='comma'>,</span> <span class='symbol'>:invalid</span>
    <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='ivar'>@parent_issue</span> <span class='op'>!=</span> <span class='id identifier rubyid_parent'>parent</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span>
        <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_would_reschedule?'>would_reschedule?</span><span class='lparen'>(</span><span class='ivar'>@parent_issue</span><span class='rparen'>)</span> <span class='op'>||</span>
        <span class='ivar'>@parent_issue</span><span class='period'>.</span><span class='id identifier rubyid_self_and_ancestors'>self_and_ancestors</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span>
          <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_relations_from'>relations_from</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span>
            <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_relation_type'>relation_type</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="IssueRelation.html" title="IssueRelation (class)">IssueRelation</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="IssueRelation.html#TYPE_PRECEDES-constant" title="IssueRelation::TYPE_PRECEDES (constant)">TYPE_PRECEDES</a></span></span> <span class='op'>&amp;&amp;</span>
               <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_issue_to'>issue_to</span><span class='period'>.</span><span class='id identifier rubyid_would_reschedule?'>would_reschedule?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='rparen'>)</span>
      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:parent_issue_id</span><span class='comma'>,</span> <span class='symbol'>:invalid</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_closed?'>closed?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@parent_issue</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>
      <span class='comment'># cannot attach an open issue to a closed parent
</span>      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:base</span><span class='comma'>,</span> <span class='symbol'>:open_issue_with_closed_parent</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_new_record?'>new_record?</span>
      <span class='comment'># moving an existing issue
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_move_possible?'>move_possible?</span><span class='lparen'>(</span><span class='ivar'>@parent_issue</span><span class='rparen'>)</span>
        <span class='comment'># move accepted
</span>      <span class='kw'>else</span>
        <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:parent_issue_id</span><span class='comma'>,</span> <span class='symbol'>:invalid</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_permissions-instance_method">
  
    #<strong>validate_permissions</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


838
839
840
841
842
843
844</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 838</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_permissions'>validate_permissions</span>
  <span class='kw'>if</span> <span class='ivar'>@attributes_set_by</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_new_record?'>new_record?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_copy?'>copy?</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_allowed_target_trackers'>allowed_target_trackers</span><span class='lparen'>(</span><span class='ivar'>@attributes_set_by</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:tracker</span><span class='comma'>,</span> <span class='symbol'>:invalid</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_required_fields-instance_method">
  
    #<strong>validate_required_fields</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Validates the issue against additional workflow requirements</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 817</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_required_fields'>validate_required_fields</span>
  <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_new_record?'>new_record?</span> <span class='op'>?</span> <span class='id identifier rubyid_author'>author</span> <span class='op'>:</span> <span class='id identifier rubyid_current_journal'>current_journal</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_required_attribute_names'>required_attribute_names</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attribute'>attribute</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\d+$</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='id identifier rubyid_attribute'>attribute</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_attribute'>attribute</span> <span class='op'>=</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
      <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_custom_field_values'>custom_field_values</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_custom_field_id'>custom_field_id</span> <span class='op'>==</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='rbrace'>}</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:present?</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_custom_field'>custom_field</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_l'>l</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>activerecord.errors.messages.blank</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_attribute'>attribute</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_attribute'>attribute</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_disabled_core_fields'>disabled_core_fields</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_attribute'>attribute</span><span class='rparen'>)</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_attribute'>attribute</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>category_id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:issue_categories</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_attribute'>attribute</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fixed_version_id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_assignable_versions'>assignable_versions</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

        <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='comma'>,</span> <span class='symbol'>:blank</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="visible?-instance_method">
  
    #<strong>visible?</strong>(usr = nil)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if usr or current user is allowed to view the issue</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_visible?'>visible?</span><span class='lparen'>(</span><span class='id identifier rubyid_usr'>usr</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_usr'>usr</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'><span class='object_link'><a href="User.html#current-class_method" title="User.current (method)">current</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_allowed_to?'>allowed_to?</span><span class='lparen'>(</span><span class='symbol'>:view_issues</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_role'>role</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>|</span>
    <span class='id identifier rubyid_visible'>visible</span> <span class='op'>=</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_logged?'>logged?</span>
        <span class='kw'>case</span> <span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_issues_visibility'>issues_visibility</span>
        <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>all</span><span class='tstring_end'>&#39;</span></span>
          <span class='kw'>true</span>
        <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>default</span><span class='tstring_end'>&#39;</span></span>
          <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_private?'>is_private?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_author'>author</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_is_or_belongs_to?'>is_or_belongs_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_assigned_to'>assigned_to</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>own</span><span class='tstring_end'>&#39;</span></span>
          <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_author'>author</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_is_or_belongs_to?'>is_or_belongs_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_assigned_to'>assigned_to</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='kw'>false</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_private?'>is_private?</span>
      <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_permissions_all_trackers?'>permissions_all_trackers?</span><span class='lparen'>(</span><span class='symbol'>:view_issues</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_visible'>visible</span> <span class='op'>&amp;&amp;=</span> <span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_permissions_tracker_ids?'>permissions_tracker_ids?</span><span class='lparen'>(</span><span class='symbol'>:view_issues</span><span class='comma'>,</span> <span class='id identifier rubyid_tracker_id'>tracker_id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_visible'>visible</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="visible_custom_field_values-instance_method">
  
    #<strong>visible_custom_field_values</strong>(user = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


279
280
281
282
283
284</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 279</span>

<span class='kw'>def</span> <span class='id identifier rubyid_visible_custom_field_values'>visible_custom_field_values</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_user_real'>user_real</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'><span class='object_link'><a href="User.html#current-class_method" title="User.current (method)">current</a></span></span>
  <span class='id identifier rubyid_custom_field_values'>custom_field_values</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_custom_field'>custom_field</span><span class='period'>.</span><span class='id identifier rubyid_visible_by?'>visible_by?</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_user_real'>user_real</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="visible_journals_with_index-instance_method">
  
    #<strong>visible_journals_with_index</strong>(user = User.current)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the journals that are visible to user with their index Used to display the issue history</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


908
909
910
911
912
913
914
915
916
917
918
919
920
921
922
923
924</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 908</span>

<span class='kw'>def</span> <span class='id identifier rubyid_visible_journals_with_index'>visible_journals_with_index</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_journals'>journals</span><span class='period'>.</span>
    <span class='id identifier rubyid_preload'>preload</span><span class='lparen'>(</span><span class='symbol'>:details</span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_preload'>preload</span><span class='lparen'>(</span><span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='symbol'>:email_address</span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_reorder'>reorder</span><span class='lparen'>(</span><span class='symbol'>:created_on</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>

  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_j'>j</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_j'>j</span><span class='period'>.</span><span class='id identifier rubyid_indice'>indice</span> <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='int'>1</span><span class='rbrace'>}</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_allowed_to?'>allowed_to?</span><span class='lparen'>(</span><span class='symbol'>:view_private_notes</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_select!'>select!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_journal'>journal</span><span class='op'>|</span>
      <span class='op'>!</span><span class='id identifier rubyid_journal'>journal</span><span class='period'>.</span><span class='id identifier rubyid_private_notes?'>private_notes?</span> <span class='op'>||</span> <span class='id identifier rubyid_journal'>journal</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='const'><span class='object_link'><a href="Journal.html" title="Journal (class)">Journal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_preload_journals_details_custom_fields'><span class='object_link'><a href="Journal.html#preload_journals_details_custom_fields-class_method" title="Journal.preload_journals_details_custom_fields (method)">preload_journals_details_custom_fields</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_select!'>select!</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_journal'>journal</span><span class='op'>|</span> <span class='id identifier rubyid_journal'>journal</span><span class='period'>.</span><span class='id identifier rubyid_notes?'>notes?</span> <span class='op'>||</span> <span class='id identifier rubyid_journal'>journal</span><span class='period'>.</span><span class='id identifier rubyid_visible_details'>visible_details</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="was_closed?-instance_method">
  
    #<strong>was_closed?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the issue was closed when loaded</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


944
945
946</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 944</span>

<span class='kw'>def</span> <span class='id identifier rubyid_was_closed?'>was_closed?</span>
  <span class='id identifier rubyid_status_was'>status_was</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_status_was'>status_was</span><span class='period'>.</span><span class='id identifier rubyid_is_closed?'>is_closed?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="working_duration-instance_method">
  
    #<strong>working_duration</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the duration in working days</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1360
1361
1362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1360</span>

<span class='kw'>def</span> <span class='id identifier rubyid_working_duration'>working_duration</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_due_date'>due_date</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_working_days'>working_days</span><span class='lparen'>(</span><span class='id identifier rubyid_start_date'>start_date</span><span class='comma'>,</span> <span class='id identifier rubyid_due_date'>due_date</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="would_reschedule?-instance_method">
  
    #<strong>would_reschedule?</strong>(other)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the other issue might be rescheduled if the start/due dates of this issue change</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1320
1321
1322
1323
1324
1325
1326
1327
1328
1329
1330
1331
1332
1333
1334
1335
1336
1337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/issue.rb', line 1320</span>

<span class='kw'>def</span> <span class='id identifier rubyid_would_reschedule?'>would_reschedule?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_all'>all</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_last'>last</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
      <span class='id identifier rubyid_i'>i</span><span class='period'>.</span><span class='id identifier rubyid_relations_from'>relations_from</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:relation_type</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="IssueRelation.html" title="IssueRelation (class)">IssueRelation</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="IssueRelation.html#TYPE_PRECEDES-constant" title="IssueRelation::TYPE_PRECEDES (constant)">TYPE_PRECEDES</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:issue_to</span><span class='rparen'>)</span> <span class='op'>+</span>
      <span class='id identifier rubyid_i'>i</span><span class='period'>.</span><span class='id identifier rubyid_leaves'>leaves</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span> <span class='op'>+</span>
      <span class='id identifier rubyid_i'>i</span><span class='period'>.</span><span class='id identifier rubyid_ancestors'>ancestors</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_relations_from'>relations_from</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:relation_type</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="IssueRelation.html" title="IssueRelation (class)">IssueRelation</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="IssueRelation.html#TYPE_PRECEDES-constant" title="IssueRelation::TYPE_PRECEDES (constant)">TYPE_PRECEDES</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:issue_to</span><span class='rparen'>)</span><span class='rbrace'>}</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
    <span class='id identifier rubyid_current'>current</span> <span class='op'>-=</span> <span class='id identifier rubyid_last'>last</span>
    <span class='id identifier rubyid_current'>current</span> <span class='op'>-=</span> <span class='id identifier rubyid_all'>all</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_last'>last</span> <span class='op'>=</span> <span class='id identifier rubyid_current'>current</span>
    <span class='id identifier rubyid_all'>all</span> <span class='op'>+=</span> <span class='id identifier rubyid_last'>last</span>
  <span class='kw'>end</span>
  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Aug 31 13:19:28 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-2.7.0).
</div>

    </div>
  </body>
</html>